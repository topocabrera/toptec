(this.webpackJsonptoptec=this.webpackJsonptoptec||[]).push([[0],{318:function(e,t,a){e.exports=a(541)},323:function(e,t,a){},326:function(e,t,a){},413:function(e,t){},415:function(e,t){},426:function(e,t){},428:function(e,t){},455:function(e,t){},457:function(e,t){},458:function(e,t){},464:function(e,t){},466:function(e,t){},484:function(e,t){},486:function(e,t){},498:function(e,t){},501:function(e,t){},539:function(e,t,a){e.exports=a.p+"static/media/factory.16d95847.jpeg"},541:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),i=a.n(o),c=a(60),l=(a(323),a(17)),s=a(18),u=a(7),d=a(21),m=a(20),h=a(34),v=(a(324),a(325),a(326),a(327),a(73)),p=a.n(v),b=a(19),f=a(115),g=a(123);a(336),a(337),a(338);g.initializeApp({apiKey:"AIzaSyB31L20GfT5Gpz8ZGRnQy56BNze6Jvsi_Q",authDomain:"toptec-6a5ef.firebaseapp.com",databaseURL:"https://toptec-6a5ef.firebaseio.com",projectId:"toptec-6a5ef",storageBucket:"toptec-6a5ef.appspot.com",messagingSenderId:"996609770390",appId:"1:996609770390:web:805010f6a1e028688f53b7"});new g.auth.GoogleAuthProvider;var E=g.auth(),C=g.database(),y=g.firestore(),k=function(){var e=Object(f.a)(p.a.mark((function e(t,a){var n,r,o,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=y.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=16;break}return r=t.email,o=t.displayName,i=t.photoURL,e.prev=8,e.next=11,n.set(Object(b.a)({displayName:o,email:r,photoURL:i},a));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),console.error("Error creating user document",e.t0);case 16:return e.abrupt("return",N(t.uid));case 17:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,y.doc("users/".concat(t)).get();case 5:return a=e.sent,e.abrupt("return",Object(b.a)({uid:t},a.data()));case 9:e.prev=9,e.t0=e.catch(2),console.error("Error fetching user",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),O=C.ref("/tutorials"),D=new(function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(){return O}},{key:"create",value:function(e){return O.push(e)}},{key:"update",value:function(e,t){return O.child(e).update(t)}},{key:"delete",value:function(e){return O.child(e).remove()}},{key:"deleteAll",value:function(){return O.remove()}}]),e}()),j=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onChangeTitle=n.onChangeTitle.bind(Object(u.a)(n)),n.onChangeDescription=n.onChangeDescription.bind(Object(u.a)(n)),n.saveTutorial=n.saveTutorial.bind(Object(u.a)(n)),n.newTutorial=n.newTutorial.bind(Object(u.a)(n)),n.state={title:"",description:"",published:!1,submitted:!1},n}return Object(s.a)(a,[{key:"onChangeTitle",value:function(e){this.setState({title:e.target.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"saveTutorial",value:function(){var e=this,t={title:this.state.title,description:this.state.description,published:!1};D.create(t).then((function(){console.log("Created new item successfully!"),e.setState({submitted:!0})})).catch((function(e){console.log(e)}))}},{key:"newTutorial",value:function(){this.setState({title:"",description:"",published:!1,submitted:!1})}},{key:"render",value:function(){return r.a.createElement("div",{className:"submit-form"},this.state.submitted?r.a.createElement("div",null,r.a.createElement("h4",null,"You submitted successfully!"),r.a.createElement("button",{className:"btn btn-success",onClick:this.newTutorial},"Add")):r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",className:"form-control",id:"title",required:!0,value:this.state.title,onChange:this.onChangeTitle,name:"title"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("input",{type:"text",className:"form-control",id:"description",required:!0,value:this.state.description,onChange:this.onChangeDescription,name:"description"})),r.a.createElement("button",{onClick:this.saveTutorial,className:"btn btn-success"},"Submit")))}}]),a}(n.Component),x=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onChangeTitle=n.onChangeTitle.bind(Object(u.a)(n)),n.onChangeDescription=n.onChangeDescription.bind(Object(u.a)(n)),n.updatePublished=n.updatePublished.bind(Object(u.a)(n)),n.updateTutorial=n.updateTutorial.bind(Object(u.a)(n)),n.deleteTutorial=n.deleteTutorial.bind(Object(u.a)(n)),n.state={currentTutorial:{key:null,title:"",description:"",published:!1},message:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setState({currentTutorial:this.props.tutorial})}},{key:"onChangeTitle",value:function(e){var t=e.target.value;this.setState((function(e){return{currentTutorial:Object(b.a)(Object(b.a)({},e.currentTutorial),{},{title:t})}}))}},{key:"onChangeDescription",value:function(e){var t=e.target.value;this.setState((function(e){return{currentTutorial:Object(b.a)(Object(b.a)({},e.currentTutorial),{},{description:t})}}))}},{key:"updatePublished",value:function(e){var t=this;D.update(this.state.currentTutorial.key,{published:e}).then((function(){t.setState((function(t){return{currentTutorial:Object(b.a)(Object(b.a)({},t.currentTutorial),{},{published:e}),message:"The status was updated successfully!"}}))})).catch((function(e){console.log(e)}))}},{key:"updateTutorial",value:function(){var e=this,t={title:this.state.currentTutorial.title,description:this.state.currentTutorial.description};D.update(this.state.currentTutorial.key,t).then((function(){e.setState({message:"The tutorial was updated successfully!"})})).catch((function(e){console.log(e)}))}},{key:"deleteTutorial",value:function(){var e=this;D.delete(this.state.currentTutorial.key).then((function(){e.props.refreshList()})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.currentTutorial;return r.a.createElement("div",null,r.a.createElement("h4",null,"Tutorial"),t?r.a.createElement("div",{className:"edit-form"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"Title"),r.a.createElement("input",{type:"text",className:"form-control",id:"title",value:t.title,onChange:this.onChangeTitle})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("input",{type:"text",className:"form-control",id:"description",value:t.description,onChange:this.onChangeDescription})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,r.a.createElement("strong",null,"Status:")),t.published?"Published":"Pending")),t.published?r.a.createElement("button",{className:"badge badge-primary mr-2",onClick:function(){return e.updatePublished(!1)}},"UnPublish"):r.a.createElement("button",{className:"badge badge-primary mr-2",onClick:function(){return e.updatePublished(!0)}},"Publish"),r.a.createElement("button",{className:"badge badge-danger mr-2",onClick:this.deleteTutorial},"Delete"),r.a.createElement("button",{type:"submit",className:"badge badge-success",onClick:this.updateTutorial},"Update"),r.a.createElement("p",null,this.state.message)):r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("p",null,"Please click on a Tutorial...")))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.tutorial;return t.currentTutorial.key!==a.key?{currentTutorial:a,message:""}:t.currentTutorial}}]),a}(n.Component),T=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).refreshList=n.refreshList.bind(Object(u.a)(n)),n.setActiveTutorial=n.setActiveTutorial.bind(Object(u.a)(n)),n.removeAllTutorials=n.removeAllTutorials.bind(Object(u.a)(n)),n.onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.state={tutorials:[],currentTutorial:null,currentIndex:-1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){D.getAll().on("value",this.onDataChange)}},{key:"componentWillUnmount",value:function(){D.getAll().off("value",this.onDataChange)}},{key:"onDataChange",value:function(e){var t=[];e.forEach((function(e){var a=e.key,n=e.val();t.push({key:a,title:n.title,description:n.description,published:n.published})})),this.setState({tutorials:t})}},{key:"refreshList",value:function(){this.setState({currentTutorial:null,currentIndex:-1})}},{key:"setActiveTutorial",value:function(e,t){this.setState({currentTutorial:e,currentIndex:t})}},{key:"removeAllTutorials",value:function(){var e=this;D.deleteAll().then((function(){e.refreshList()})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.tutorials,n=t.currentTutorial,o=t.currentIndex;return r.a.createElement("div",{className:"list row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h4",null,"Tutorials List"),r.a.createElement("ul",{className:"list-group"},a&&a.map((function(t,a){return r.a.createElement("li",{className:"list-group-item "+(a===o?"active":""),onClick:function(){return e.setActiveTutorial(t,a)},key:a},t.title)}))),r.a.createElement("button",{className:"m-3 btn btn-sm btn-danger",onClick:this.removeAllTutorials},"Remove All")),r.a.createElement("div",{className:"col-md-6"},n?r.a.createElement(x,{tutorial:n,refreshList:this.refreshList}):r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("p",null,"Please click on a Tutorial..."))))}}]),a}(n.Component),S=a(35),_=a.n(S),P=a(16),M=a(575),w=a(68),Y=a.n(w),A=a(22),I=a.n(A),L=C.ref("/reservation"),V=C.ref("/clients"),R=C.ref("/totalPersonas"),W=new(function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(){return L}},{key:"getLast",value:function(){V.orderByChild("id").limitToLast(1).once("value",(function(e){console.log("snaps",e.val())}),(function(e){console.log("The read failed: "+e.code)}))}},{key:"create",value:function(e){return L.push(e)}},{key:"update",value:function(e,t){return L.child(e).update(t)}},{key:"delete",value:function(e){return L.child(e).remove()}},{key:"deleteAll",value:function(){return L.remove()}},{key:"createTotal",value:function(e){return R.push(e)}},{key:"getTotal",value:function(){return R}},{key:"updateTotal",value:function(e,t){return R.child(e).update(t)}}]),e}()),F=["Windy","Temple","La Lacteo","DDL","Don Abdon","Diafana","Cremosur","La Caba\xf1a","Punta del Agua","La Tirolesa","Grassetto","Plenty","Frigorifico Recreo","Frigorifico Paladini","Generico","Cluselat"],q=[{value:"turno1",name:"Turno 1 (19:30 - 22:30hs)"},{value:"turno2",name:"Turno 2 (22:30 - 03:00hs)"}],B=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88],z=[{value:1,name:"Lunes"},{value:2,name:"Martes"},{value:3,name:"Mi\xe9rcoles"},{value:4,name:"Jueves"},{value:5,name:"Viernes"},{value:6,name:"S\xe1bado"},{value:0,name:"Domingo"}],U=P.b.alert,$=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(u.a)(n)),n.deleteReserva=n.deleteReserva.bind(Object(u.a)(n)),n.state={reservas:[],date:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){W.getAll().orderByChild("id").on("value",this.onDataChange)}},{key:"componentWillUnmount",value:function(){W.getAll().off("value",this.onDataChange)}},{key:"onDataChange",value:function(e){var t=[];e.forEach((function(e){var a=e.val(),n=e.key;t.push({key:n,id:a.id,name:a.name,adentro:a.adentro,mesa:a.mesa,cantidad:a.cantidad,turno:a.turno,date:a.date,asistio:a.asistio||!1})})),this.setState({reservas:t})}},{key:"onChangeDate",value:function(e){var t=e.format("DD-MM-YYYY");this.setState({date:t})}},{key:"deleteReserva",value:function(){var e=this.state,t=e.date,a=e.reservas.filter((function(e){return I()(e.date,"DD-MM-YYYY").isSame(I()(t,"DD-MM-YYYY"))}));console.log(a),a.forEach((function(e){W.delete(e.key).then().catch((function(e){P.c.fail("Ocurri\xf3 un error !!!",2)}))}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"list row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h4",null,"Eliminar reservas"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"fecha"},"Seleccione fecha de reserva"),r.a.createElement(_.a,{className:"post-input  post-input__event",dateFormat:"DD-MM-YYYY",timeFormat:!1,name:"eventDate",utc:!0,closeOnSelect:!0,initialValue:I()((new Date).getTime()).format("DD-MM-YYYY"),value:this.state.date,onChange:this.onChangeDate})),r.a.createElement("div",null,r.a.createElement(M.a,{"aria-label":"delete",type:"button",variant:"contained",color:"secondary",onClick:function(){return U("Eliminar","Est\xe1s seguro???",[{text:"Cancelar"},{text:"Ok",onPress:function(){return e.deleteReserva()}}])}},"Eliminar",r.a.createElement(Y.a,null)))))}}]),a}(n.Component),G=a(31),J=a(111),H=a.n(J),Q=a(578),K=a(612),Z=a(168),X=a(579),ee=a(613),te=a(586),ae=a(606),ne=a(587),re=a(602),oe=a(156),ie=a.n(oe),ce=C.ref("/users"),le=new(function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(){return ce}},{key:"getUser",value:function(e){ce.orderByChild("email").equalTo(e).once("child_added").then((function(e){return e.val()}))}},{key:"create",value:function(e){return ce.push(e)}},{key:"update",value:function(e,t){return ce.child(e).update(t)}},{key:"delete",value:function(e){return ce.child(e).remove()}},{key:"deleteAll",value:function(){return ce.remove()}}]),e}()),se=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",error:!1},n.getUser=n.getUser.bind(Object(u.a)(n)),n.verifyLogin=n.verifyLogin.bind(Object(u.a)(n)),n.onChangeValues=n.onChangeValues.bind(Object(u.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){localStorage.removeItem("currentUser")}},{key:"onChangeValues",value:function(e){var t,a=e.target.name,n=e.target.value;this.setState((t={},Object(G.a)(t,a,n),Object(G.a)(t,"error",!1),t))}},{key:"getUser",value:function(){le.getAll().orderByChild("email").equalTo(this.state.email).once("child_added",this.verifyLogin).catch(this.setState({error:!0}))}},{key:"verifyLogin",value:function(e){var t=e.val().password;if(this.state.password===H.a.AES.decrypt(t,"passname").toString(H.a.enc.Utf8)){this.setState({error:!1});var a={userName:e.val().userName,email:e.val().email,rol:e.val().rol};localStorage.setItem("currentUser",JSON.stringify(a)),window.location="/"}else this.setState({error:!0})}},{key:"render",value:function(){return r.a.createElement(Q.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{className:"form-container"},r.a.createElement(K.a,{className:"avatar"},r.a.createElement(ie.a,null)),r.a.createElement(Z.a,{component:"h1",variant:"h5"},"Iniciar Sesi\xf3n"),this.state.error&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"El usuario o la contrase\xf1a son incorrectos"),r.a.createElement("div",{className:"login-container"},r.a.createElement(X.a,{container:!0,spacing:2},r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",fullWidth:!0,id:"email",label:"Email",name:"email",autoComplete:"email",onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",fullWidth:!0,name:"password",label:"Contrase\xf1a",type:"password",id:"password",autoComplete:"current-password",onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(te.a,{control:r.a.createElement(ae.a,{value:"remember",color:"primary"}),label:"Recordarme"}))),r.a.createElement(M.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:"button__save",onClick:this.getUser},"Iniciar Sesi\xf3n"),r.a.createElement(X.a,{container:!0,justify:"center"},r.a.createElement(X.a,{item:!0},r.a.createElement(ne.a,{href:"/register",variant:"body2"},"No tienes una cuenta? Reg\xedstrate"))))),r.a.createElement(re.a,{mt:5},r.a.createElement(Z.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(ne.a,{color:"inherit"},"TopTec")," ",(new Date).getFullYear(),".")))}}]),a}(n.Component),ue=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={userName:"",password:"",email:"",rol:"gym"},n.onSaveUser=n.onSaveUser.bind(Object(u.a)(n)),n.onChangeValues=n.onChangeValues.bind(Object(u.a)(n)),n}return Object(s.a)(a,[{key:"onChangeValues",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(G.a)({},t,a))}},{key:"onSaveUser",value:function(){var e=H.a.AES.encrypt(this.state.password,"passname").toString(),t={userName:this.state.userName,password:e,email:this.state.email,rol:this.state.rol};le.create(t).then((function(){P.c.success("Cargado correctamente!!",1,(function(){window.location="/login"}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement(Q.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{className:"form-container"},r.a.createElement(K.a,{className:"avatar"},r.a.createElement(ie.a,null)),r.a.createElement(Z.a,{component:"h1",variant:"h5"},"Registro"),r.a.createElement("div",{className:"login-container"},r.a.createElement(X.a,{container:!0,spacing:2},r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{autoComplete:"fname",name:"userName",variant:"outlined",required:!0,fullWidth:!0,id:"userName",label:"Nombre de usuario",autoFocus:!0,onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",autoComplete:"email",onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Contrase\xf1a",type:"password",id:"password",autoComplete:"current-password",onChange:this.onChangeValues}))),r.a.createElement(M.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:"button__save",onClick:this.onSaveUser},"Registrar"),r.a.createElement(X.a,{container:!0,justify:"center"},r.a.createElement(X.a,{item:!0},r.a.createElement(ne.a,{href:"/login",variant:"body2"},"Ya tienes una cuenta? Iniciar sesi\xf3n"))))),r.a.createElement(re.a,{mt:5},r.a.createElement(Z.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(ne.a,{color:"inherit"},"TopTec")," ",(new Date).getFullYear(),".")))}}]),a}(n.Component),de=Object(n.createContext)({user:null}),me=(n.Component,function(){var e=Object(n.useContext)(de),t=e.photoURL,a=e.displayName,o=e.email;return console.log(e),r.a.createElement("div",{className:"mx-auto w-11/12 md:w-2/4 py-8 px-4 md:px-8"},r.a.createElement("div",{className:"flex border flex-col items-center md:flex-row md:items-start border-blue-400 px-3 py-4"},r.a.createElement("div",{style:{background:"url(".concat(t||"https://res.cloudinary.com/dqcsk8rsc/image/upload/v1577268053/avatar-1-bitmoji_upgwhc.png",")  no-repeat center center"),backgroundSize:"cover",height:"200px",width:"200px"},className:"border border-blue-300"}),r.a.createElement("div",{className:"md:pl-4"},r.a.createElement("h2",{className:"text-2xl font-semibold"},a),r.a.createElement("h3",{className:"italic"},o))),r.a.createElement("button",{className:"w-full py-3 bg-red-600 mt-4 text-white",onClick:function(){E.signOut()}},"Sign out"))}),he=a(611),ve=a(603),pe=a(610),be=a(585),fe=a(543),ge=a(607),Ee=a(588),Ce=a(589),ye=a(590),ke=a(62),Ne=a.n(ke),Oe=a(295),De=a.n(Oe),je=a(294),xe=a.n(je),Te=a(207),Se=P.b.alert,_e=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).refreshList=n.refreshList.bind(Object(u.a)(n)),n.setActiveTutorial=n.setActiveTutorial.bind(Object(u.a)(n)),n.onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(u.a)(n)),n.onChangeTurno=n.onChangeTurno.bind(Object(u.a)(n)),n.filterReservations=n.filterReservations.bind(Object(u.a)(n)),n.deleteReserva=n.deleteReserva.bind(Object(u.a)(n)),n.changeSelect=n.changeSelect.bind(Object(u.a)(n)),n.handleOpenModal=n.handleOpenModal.bind(Object(u.a)(n)),n.onChangeValueCant=n.onChangeValueCant.bind(Object(u.a)(n)),n.handleClose=n.handleClose.bind(Object(u.a)(n)),n.editCant=n.editCant.bind(Object(u.a)(n)),n.changeTotal=n.changeTotal.bind(Object(u.a)(n)),n.onGetTotales=n.onGetTotales.bind(Object(u.a)(n)),n.state={reservas:[],currentIndex:-1,date:Te.parse(n.props.location.search).date||I()((new Date).getTime()).format("DD-MM-YYYY"),turno:Te.parse(n.props.location.search).turno||"turno1",reservaFilter:[],cantAdentro:0,cantAfuera:0,cantTotal:0,totalAsistentes:0,reservation:{cantidad:""},indexOpen:-1,contadorTotal:0},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=I()((new Date).getTime()).format("DD-MM-YYYY");this.props.location.search?e=Te.parse(this.props.location.search).date:window.location.href="/forest/reservas?date=".concat(e,"&turno=turno1");W.getTotal().orderByChild("date").equalTo(e).on("child_added",this.onGetTotales),W.getAll().orderByChild("date").equalTo(e).on("value",this.onDataChange)}},{key:"componentWillUnmount",value:function(){W.getAll().off("value",this.onDataChange)}},{key:"onDataChange",value:function(e){var t=this,a=[];if(e.forEach((function(e){var t=e.val(),n=e.key;a.push({key:n,id:t.id,name:t.name,adentro:t.adentro,mesa:t.mesa,cantidad:t.cantidad,turno:t.turno,date:t.date,asistio:t.asistio||!1})})),this.setState({reservas:a}),!this.state.currentTotal){var n={date:this.state.date,value:0};W.createTotal(n).then((function(e){t.setState({currentTotal:{date:t.state.date,value:0,key:e.key}})})).catch((function(e){P.c.fail("Ocurri\xf3 un error !!!",2)}))}this.filterReservations()}},{key:"filterReservations",value:function(e,t){var a=this.state,n=a.reservas,r=a.turno,o=a.date,i=[],c=0,l=0,s=0,u=0,d=t||r,m=e||o;n.forEach((function(e){e.date===m&&e.turno===d&&(i.push(e),c=e.adentro?c+1:c,l=e.adentro?l:l+1,s+=parseInt(e.cantidad,10),e.asistio&&(u+=parseInt(e.cantidad,10)))})),i=i.sort((function(e,t){return e.mesa-t.mesa})),this.setState({reservaFilter:i,cantAdentro:c,cantAfuera:l,cantTotal:s,totalAsistentes:u,date:e||o})}},{key:"onGetTotales",value:function(e){var t=e.key,a=e.val(),n=a;n.key=t,this.setState({currentTotal:n,contadorTotal:a.value})}},{key:"onChangeDate",value:function(e){var t=e.format("DD-MM-YYYY");window.location.href="/forest/reservas?date=".concat(t,"&turno=").concat(this.state.turno)}},{key:"onChangeTurno",value:function(e){window.location.href="/forest/reservas?date=".concat(this.state.date,"&turno=").concat(e.target.value)}},{key:"refreshList",value:function(){this.setState({currentTutorial:null,currentIndex:-1})}},{key:"setActiveTutorial",value:function(e,t){this.setState({currentTutorial:e,currentIndex:t})}},{key:"deleteReserva",value:function(e){W.delete(e).then((function(){P.c.success("Eliminado correctamente!!",1,(function(){window.location.reload(!1)}))})).catch((function(e){P.c.fail("Ocurri\xf3 un error !!!",2)}))}},{key:"changeSelect",value:function(e){var t=this,a={asistio:!e.asistio};W.update(e.key,a).then((function(){t.filterReservations()})).catch((function(e){console.log(e)}))}},{key:"handleOpenModal",value:function(e,t){this.setState({indexOpen:e,reservation:{cantidad:t.cantidad}})}},{key:"onChangeValueCant",value:function(e){e.target.name;var t=e.target.value;this.setState({reservation:{cantidad:t}})}},{key:"handleClose",value:function(){this.setState({indexOpen:-1})}},{key:"editCant",value:function(e){var t={cantidad:parseInt(this.state.reservation.cantidad,10)};W.update(e.key,t).then((function(){P.c.success("Actualizado correctamente...",1,(function(){window.location.reload()}))})).catch((function(e){P.c.fail("Ocurri\xf3 un error !!!",2)}))}},{key:"changeTotal",value:function(e){var t=this.state.currentTotal,a={value:"sum"===e?this.state.contadorTotal+1:this.state.contadorTotal-1};t&&(W.updateTotal(this.state.currentTotal.key,a).then().catch((function(e){P.c.fail("Ocurri\xf3 un error !!!",2)})),this.setState({contadorTotal:a.value}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.reservaFilter,n=(t.cantAdentro,t.contadorTotal),o=t.cantTotal,i=t.totalAsistentes,c=t.indexOpen,l=t.reservation,s=B.length,u=o>150?"red":"",d=i>150?"red":"";return r.a.createElement("div",{className:"list row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"new-reservation"},r.a.createElement("a",{className:"btn btn-primary",href:"/forest/reservation",role:"button"},"Nueva reserva"),r.a.createElement("a",{className:"btn btn-primary mesa__map",href:"/forest/mesas?date=".concat(this.state.date),role:"button"},"Mapa mesas")),r.a.createElement("h4",null,"Listado de reservas"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"fecha"},"Seleccione fecha de reserva"),r.a.createElement(_.a,{className:"post-input  post-input__event",dateFormat:"DD-MM-YYYY",timeFormat:!1,name:"eventDate",utc:!0,closeOnSelect:!0,initialValue:I()((new Date).getTime()).format("DD-MM-YYYY"),value:this.state.date,onChange:this.onChangeDate})),r.a.createElement("div",{className:"form-group"},r.a.createElement(he.a,null,"Turno"),r.a.createElement(ve.a,{onChange:this.onChangeTurno,value:this.state.turno,className:"select__form",fullWidth:!0},q.map((function(e){return r.a.createElement(pe.a,{key:e.value,value:e.value},e.name)})))),r.a.createElement(be.a,{className:"info__pedidos"},r.a.createElement("div",{className:"list__reservas"},r.a.createElement("span",{className:"total__title"},"Total reservas: ",a.length," ")),r.a.createElement("div",{className:"list__libres"},r.a.createElement("span",{className:"total__title free"},"Mesas libres: ",s-a.length)),r.a.createElement("span",{className:"cant__total ".concat(u)},"Personas previstas: ",o),r.a.createElement("span",{className:"cant__total-asist ".concat(d)},"Personas que asistieron: ",i),r.a.createElement("div",{className:"total-personas__container"},r.a.createElement("span",{className:"total__label"},"Contador de personas"),r.a.createElement(fe.a,{"aria-label":"delete",disabled:n<1,onClick:function(t){t.preventDefault(),e.changeTotal("res")}},r.a.createElement(xe.a,null)),r.a.createElement(ee.a,{value:n,variant:"outlined",className:"total-personas",size:"small"}),r.a.createElement(fe.a,{"aria-label":"add",onClick:function(t){t.preventDefault(),e.changeTotal("sum")}},r.a.createElement(De.a,null)))),r.a.createElement("div",{className:"table-container"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Asisti\xf3"),r.a.createElement("th",{scope:"col"},"Mesa"),r.a.createElement("th",{scope:"col"},"Nombre"),r.a.createElement("th",{scope:"col"},"Cantidad"),r.a.createElement("th",{scope:"col"},"Ubicaci\xf3n"),r.a.createElement("th",{scope:"col"},"Acciones"))),r.a.createElement("tbody",null,a&&a.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,r.a.createElement(ae.a,{checked:t.asistio,color:"primary",onChange:function(a){a.preventDefault(),e.changeSelect(t)}})),r.a.createElement("td",null,t.mesa),r.a.createElement("td",null,r.a.createElement("a",{href:"/forest/mesa/".concat(t.id)},t.name)),r.a.createElement("td",null,t.cantidad,r.a.createElement(fe.a,{className:"action__link",size:"small",onClick:function(n){n.preventDefault(),e.handleOpenModal(a,t)}},r.a.createElement(Ne.a,null)),r.a.createElement(ge.a,{open:c===a,"aria-labelledby":"form-dialog-title"},r.a.createElement(Ee.a,{id:"form-dialog-title",onClose:e.handleClose},"Editar cantidad de personas"),r.a.createElement(Ce.a,null,r.a.createElement(ee.a,{className:"prod-input",autoFocus:!0,fullWidth:!0,margin:"dense",name:"cantidad",label:"Cantidad pers.",type:"number",value:l.cantidad,onChange:e.onChangeValueCant})),r.a.createElement(ye.a,null,r.a.createElement(M.a,{color:"primary",onClick:e.handleClose},"Cancelar"),r.a.createElement(M.a,{color:"primary",disabled:""===l.cantidad,onClick:function(a){a.preventDefault(),e.editCant(t)}},"Aceptar")))),r.a.createElement("td",null,t.adentro?"Adentro":"Afuera"),r.a.createElement("td",null,r.a.createElement(fe.a,{"aria-label":"delete",className:"action__link",href:"/forest/reserva/".concat(t.id),role:"button"},r.a.createElement(Ne.a,null)),r.a.createElement(fe.a,{"aria-label":"delete",type:"button",className:"action__button",onClick:function(){return Se("Eliminar","Est\xe1s seguro???",[{text:"Cancelar"},{text:"Ok",onPress:function(){return e.deleteReserva(t.key)}}])}},r.a.createElement(Y.a,{color:"secondary"}))))})))),0===a.length&&r.a.createElement("div",{className:"empty__container"},r.a.createElement("span",{className:"message-empty"},"No hay reservas a\xfan")))))}}]),a}(n.Component),Pe=a(609),Me=a(161),we=a.n(Me),Ye=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onChangeName=n.onChangeName.bind(Object(u.a)(n)),n.onChangeCantidad=n.onChangeCantidad.bind(Object(u.a)(n)),n.onChangeAdentro=n.onChangeAdentro.bind(Object(u.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(u.a)(n)),n.onChangeTurno=n.onChangeTurno.bind(Object(u.a)(n)),n.onChangeCumple=n.onChangeCumple.bind(Object(u.a)(n)),n.saveReserva=n.saveReserva.bind(Object(u.a)(n)),n.newReserva=n.newReserva.bind(Object(u.a)(n)),n.onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.getMesas=n.getMesas.bind(Object(u.a)(n)),n.obtainLastMesa=n.obtainLastMesa.bind(Object(u.a)(n)),n.state={name:"",adentro:!1,mesa:"",cantidad:"",date:I()((new Date).getTime()).format("DD-MM-YYYY"),turno:"turno1",lastId:0,mesasAdentro:{},mesasAfuera:{},error:!1,isCumple:!1,cantidadMesas:"",submitted:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){W.getAll().orderByChild("id").limitToLast(1).once("child_added",this.onDataChange),W.getAll().orderByChild("mesa").on("value",this.getMesas)}},{key:"componentWillUnmount",value:function(){W.getAll().off("child_added",this.onDataChange)}},{key:"onDataChange",value:function(e){this.setState({lastId:e.val().id||0})}},{key:"getMesas",value:function(e){var t=[];e.forEach((function(e){var a=e.val();t.push({name:a.name,adentro:a.adentro,mesa:a.mesa,cantidad:a.cantidad,turno:a.turno,date:a.date})})),this.setState({reservas:t}),this.obtainLastMesa()}},{key:"obtainLastMesa",value:function(e,t){var a=this.state,n=a.reservas,r=a.turno,o=a.date,i=0,c=10,l=t||r,s=e||o;n.forEach((function(e){e.date===s&&e.turno===l&&(i=e.adentro?e.mesa:i,c=e.adentro?c:e.mesa)})),this.setState({lastMesaAdentro:i,lastMesaAfuera:c})}},{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeCantidad",value:function(e){this.setState({cantidad:e.target.value})}},{key:"onChangeAdentro",value:function(){this.setState({adentro:!this.state.adentro})}},{key:"onChangeCumple",value:function(){this.setState({isCumple:!this.state.isCumple})}},{key:"onChangeDate",value:function(e){var t=e.format("DD-MM-YYYY");this.setState({date:t}),this.obtainLastMesa(t,"")}},{key:"onChangeTurno",value:function(e){this.setState({turno:e.target.value}),this.obtainLastMesa("",e.target.value)}},{key:"validationLugar",value:function(e){return!(this.state.adentro&&e>10)&&!(!this.state.adentro&&e>55)}},{key:"saveReserva",value:function(){for(var e=this,t=[],a=this.state.cantidad/6,n=this.state.cantidad%6===0?Math.trunc(a):Math.trunc(a)+1,r=this.state.cantidad,o=this.state.isCumple?"".concat(this.state.name," (Cumple)"):this.state.name,i=1;i<n+1;i++){var c=r<6?r:6,l={id:this.state.lastId+i,name:o,adentro:this.state.adentro,mesa:"",cantidad:parseInt(c,10),date:this.state.date,turno:this.state.turno,asistio:!1,activa:!1};r-=6,t.push(l)}n===t.length&&t.forEach((function(t){W.create(t).then((function(){P.c.loading("Loading...",1,(function(){e.setState({submitted:!0})}))})).catch((function(e){P.c.fail("Ocurri\xf3 un error !!!",2)}))}))}},{key:"newReserva",value:function(){this.setState({name:"",adentro:!1,mesa:0,cantidad:0,date:I()((new Date).getTime()).format("DD-MM-YYYY"),turno:"turno1",isCumple:!1,submitted:!1})}},{key:"render",value:function(){var e=this.state.adentro?"Adentro":"Afuera";return r.a.createElement(Q.a,{component:"main",maxWidth:"xs"},this.state.submitted?r.a.createElement("div",null,r.a.createElement("h4",null,"Reserva creada correctamente!"),r.a.createElement("a",{role:"button",className:"btn btn-success",href:"/forest/reservation"},"Nueva"),r.a.createElement("a",{className:"btn btn-primary go-listado",href:"/forest/reservas",role:"button"},"Listado")):r.a.createElement("div",{className:"form-container"},r.a.createElement(Z.a,{component:"h1",variant:"h5"},"Nueva Reserva"),r.a.createElement("div",{className:"login-container"},this.state.error&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Se super\xf3 la cantidad m\xe1xima de mesas para ",e,r.a.createElement(Pe.a,{title:"Mesas adentro: 1 - 10. Mesas afuera: 11 - 55",open:this.state.open},r.a.createElement(fe.a,{"aria-label":"mesas",onClick:this.changeTooltip,color:"secondary"},r.a.createElement(we.a,null)))),r.a.createElement(X.a,{container:!0,spacing:2},r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(he.a,null,"Fecha"),r.a.createElement(_.a,{className:"post-input  post-input__event",dateFormat:"DD-MM-YYYY",timeFormat:!1,name:"eventDate",utc:!0,closeOnSelect:!0,value:this.state.date,onChange:this.onChangeDate})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(he.a,null,"Turno"),r.a.createElement(ve.a,{onChange:this.onChangeTurno,value:this.state.turno,className:"select__form",fullWidth:!0},q.map((function(e){return r.a.createElement(pe.a,{key:e.value,value:e.value},e.name)})))),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,className:"default__textfield",id:"name",label:"Nombre",value:this.state.name,name:"name",onChange:this.onChangeName})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(te.a,{control:r.a.createElement(ae.a,{color:"primary",value:this.state.isCumple,onChange:this.onChangeCumple,name:"iscumple"}),labelPlacement:"start",label:"Cumplea\xf1os?"})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",className:"default__textfield",fullWidth:!0,required:!0,id:"cantidad",label:"Cantidad de personas",value:this.state.cantidad,name:"cantidad",onChange:this.onChangeCantidad})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(te.a,{control:r.a.createElement(ae.a,{color:"primary",value:this.state.adentro,onChange:this.onChangeAdentro,name:"iscumple"}),labelPlacement:"start",label:"Adentro"}))),r.a.createElement(M.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:"button__save",onClick:this.saveReserva,disabled:""===this.state.name||""===this.state.cantidad},"Aceptar"))))}}]),a}(n.Component),Ae=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onChangeName=n.onChangeName.bind(Object(u.a)(n)),n.onChangeMesa=n.onChangeMesa.bind(Object(u.a)(n)),n.onChangeCantidad=n.onChangeCantidad.bind(Object(u.a)(n)),n.onChangeAdentro=n.onChangeAdentro.bind(Object(u.a)(n)),n.updateReserva=n.updateReserva.bind(Object(u.a)(n)),n.changeTooltip=n.changeTooltip.bind(Object(u.a)(n)),n.onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.getMesas=n.getMesas.bind(Object(u.a)(n)),n.obtainLastMesa=n.obtainLastMesa.bind(Object(u.a)(n)),n.state={currentReserva:{key:null,id:0,name:"",adentro:!1,mesa:0,cantidad:"",date:I()((new Date).getTime()).format("DD-MM-YYYY"),turno:"turno1"},mesasAdentro:{},mesasAfuera:{},error:{value:!1,message:""},open:!1,submitted:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=parseInt(this.props.match.params.id,10);W.getAll().orderByChild("id").equalTo(e).once("value",this.onDataChange)}},{key:"componentWillUnmount",value:function(){W.getAll().off("child_added",this.onDataChange)}},{key:"onDataChange",value:function(e){var t=Object.keys(e.val()),a=e.val()[t];a.key=t[0],this.setState({currentReserva:a}),W.getAll().orderByChild("mesa").on("value",this.getMesas)}},{key:"getMesas",value:function(e){var t=this.state.currentReserva,a=[];e.forEach((function(e){var n=e.val();n.turno===t.turno&&n.date===t.date&&a.push({id:n.id,name:n.name,adentro:n.adentro,mesa:n.mesa,cantidad:n.cantidad,turno:n.turno,date:n.date})})),this.setState({reservas:a})}},{key:"obtainLastMesa",value:function(e,t){var a=this.state,n=a.reservas,r=a.turno,o=a.date,i=0,c=11,l=t||r,s=e||o;n.forEach((function(e){e.date===s&&e.turno===l&&(i=e.adentro?e.mesa:i,c=e.adentro?c:e.mesa)})),this.setState({lastMesaAdentro:i,lastMesaAfuera:c})}},{key:"onChangeName",value:function(e){this.setState({currentReserva:Object(b.a)(Object(b.a)({},this.state.currentReserva),{},{name:e.target.value})})}},{key:"onChangeMesa",value:function(e){this.setState({currentReserva:Object(b.a)(Object(b.a)({},this.state.currentReserva),{},{mesa:e.target.value}),error:{value:!1,message:""}})}},{key:"onChangeCantidad",value:function(e){this.setState({currentReserva:Object(b.a)(Object(b.a)({},this.state.currentReserva),{},{cantidad:e.target.value})})}},{key:"onChangeAdentro",value:function(e){this.setState({currentReserva:Object(b.a)(Object(b.a)({},this.state.currentReserva),{},{adentro:!this.state.currentReserva.adentro})})}},{key:"validationLugar",value:function(e){var t=this;return this.state.reservas.filter((function(a){return a.mesa===e&&a.id!==t.state.currentReserva.id})).length>0?(this.setState({error:{value:!0,message:"Ya existe otra reserva con ese N\xba de mesa"}}),!1):!(this.state.currentReserva.cantidad>6)||(this.setState({error:{value:!0,message:"Cantidad m\xe1xima por mesas (".concat(6,") superada")}}),!1)}},{key:"updateReserva",value:function(){var e=this,t={id:this.state.currentReserva.id,name:this.state.currentReserva.name,mesa:parseInt(this.state.currentReserva.mesa,10),cantidad:parseInt(this.state.currentReserva.cantidad,10),date:this.state.currentReserva.date,turno:this.state.currentReserva.turno,adentro:this.state.currentReserva.adentro};this.validationLugar(t.mesa)&&W.update(this.state.currentReserva.key,t).then((function(){e.setState({submitted:!0,error:{value:!1,message:""}})})).catch((function(e){console.log(e)}))}},{key:"changeTooltip",value:function(){this.setState({open:!this.state.open})}},{key:"render",value:function(){return r.a.createElement(Q.a,{component:"main",maxWidth:"xs"},this.state.submitted?r.a.createElement("div",null,r.a.createElement("h4",null,"Reserva editada correctamente!"),r.a.createElement("a",{className:"btn btn-success",href:"/forest/reservation",role:"button"},"Nueva Reserva")):r.a.createElement("div",{className:"form-container"},r.a.createElement(Z.a,{component:"h1",variant:"h5"},"Editar Reserva"),r.a.createElement("div",{className:"login-container"},this.state.error.value&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},this.state.error.message,r.a.createElement(Pe.a,{title:"Mesas adentro: 1 - 10. Mesas afuera: 11 - 55",open:this.state.open},r.a.createElement(fe.a,{"aria-label":"mesas",onClick:this.changeTooltip,color:"secondary"},r.a.createElement(we.a,null)))),r.a.createElement(X.a,{container:!0,spacing:2},r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{id:"standard-basic",label:"Fecha",value:this.state.currentReserva.date,disabled:!0})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{id:"standard-basic",label:"Turno",value:this.state.currentReserva.turno,disabled:!0})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,className:"default__textfield",id:"name",label:"Nombre",value:this.state.currentReserva.name,name:"name",onChange:this.onChangeName})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",className:"default__textfield",fullWidth:!0,required:!0,id:"cantidad",label:"Cantidad de personas",value:this.state.currentReserva.cantidad,name:"cantidad",onChange:this.onChangeCantidad,error:this.state.currentReserva.cantidad>6,helperText:this.state.currentReserva.cantidad>6?"Cantidad m\xe1xima por mesa superada":""})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(te.a,{control:r.a.createElement(ae.a,{color:"primary",value:this.state.currentReserva.adentro,onChange:this.onChangeAdentro,name:"iscumple",checked:this.state.currentReserva.adentro}),labelPlacement:"start",label:"Adentro"})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",className:"default__textfield",fullWidth:!0,required:!0,id:"mesa",label:"Mesa",name:"mesa",value:this.state.currentReserva.mesa,onChange:this.onChangeMesa,min:this.state.currentReserva.adentro?1:11,max:this.state.currentReserva.adentro?10:55}))),r.a.createElement(M.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:"button__save",onClick:this.updateReserva,disabled:""===this.state.currentReserva.name||""===this.state.currentReserva.cantidad},"Aceptar"))))}}]),a}(n.Component),Ie=a(608),Le=a(162),Ve=a.n(Le),Re=a(122),We=a.n(Re),Fe=P.b.alert,qe=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).updateReserva=n.updateReserva.bind(Object(u.a)(n)),n.onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.getMesas=n.getMesas.bind(Object(u.a)(n)),n.state={currentReserva:{key:null,id:0,name:"",adentro:!1,mesa:0,cantidad:"",date:I()((new Date).getTime()).format("DD-MM-YYYY"),turno:"turno1"},reservas:[],open:!1,submitted:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=parseInt(this.props.match.params.id,10);W.getAll().orderByChild("id").equalTo(e).once("value",this.onDataChange)}},{key:"componentWillUnmount",value:function(){W.getAll().off("child_added",this.onDataChange)}},{key:"onDataChange",value:function(e){var t=Object.keys(e.val()),a=e.val()[t];a.key=t[0],this.setState({currentReserva:a}),W.getAll().orderByChild("mesa").on("value",this.getMesas)}},{key:"getMesas",value:function(e){var t=this.state.currentReserva,a=[];e.forEach((function(e){var n=e.val(),r=e.key;n.date===t.date&&n.activa&&a.push({key:r,id:n.id,mesa:n.mesa,turno:n.turno,date:n.date,activa:n.activa||!1})})),this.setState({reservas:a})}},{key:"validationLugar",value:function(e){var t=this;return this.state.currentReserva.adentro&&e>10?(this.setState({error:{value:!0,message:"N\xfamero de mesa no corresponde para Adentro"}}),!1):!this.state.currentReserva.adentro&&(e>55||e<11)?(this.setState({error:{value:!0,message:"N\xfamero de mesa no corresponde para Afuera"}}),!1):this.state.reservas.filter((function(a){return a.mesa===e&&a.id!==t.state.currentReserva.id})).length>0?(this.setState({error:{value:!0,message:"Ya existe otra reserva con ese N\xba de mesa"}}),!1):!(this.state.currentReserva.cantidad>6)||(this.setState({error:{value:!0,message:"Cantidad m\xe1xima por mesas (".concat(6,") superada")}}),!1)}},{key:"updateReserva",value:function(e,t,a,n){var r=this,o={mesa:t,activa:!0},i=(""!==this.state.currentReserva.mesa&&this.state.currentReserva.mesa,""!==a&&a.length>1?a.filter((function(e){return e.turno===r.state.currentReserva.turno})):a);console.log(a,i,this.state.currentReserva.mesa),a&&"free"===n?W.update(i[0].key,{activa:!1,mesa:""}).then((function(){P.c.success("Mesa actualizada correctamente!!",1)})).catch((function(e){P.c.fail("Ocurri\xf3 un error !!!",2)})):""===this.state.currentReserva.mesa&&"assign"===n&&a.filter((function(e){return e.turno===r.state.currentReserva.turno})).length>0?P.c.fail("Ya hay una mesa asignada en este turno",2):W.update(this.state.currentReserva.key,o).then((function(){P.c.success("Mesa asignada correctamente!!",1)})).catch((function(e){P.c.fail("Ocurri\xf3 un error !!!",2)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.currentReserva,n=t.reservas,o=[];return B.forEach((function(t,a){var i=n.filter((function(e){return e.mesa===t})),c="";i.length>1&&(c="button-mesa two-colors"),1===i.length&&(c="button-mesa ".concat(i[0].turno)),o.push(r.a.createElement("button",{key:t,className:i.length>0?c:"button-mesa",onClick:function(a){i.length>0?Fe("Actualizar mesas",r.a.createElement("div",null,"Que desea hacer?"),[{text:"Asignar mesa",onPress:function(){return e.updateReserva(a,t,i,"assign")}},{text:"Liberar mesa",onPress:function(){return e.updateReserva(a,t,i,"free")}},{text:"Cancelar"}]):(a.preventDefault(),e.updateReserva(a,t,"",""))}},t))})),r.a.createElement(Q.a,{className:"map__container",component:"main",maxWidth:"xs"},r.a.createElement(Ie.a,{separator:r.a.createElement(Ve.a,{fontSize:"small"}),"aria-label":"breadcrumb"},r.a.createElement(ne.a,{color:"primary",href:"/forest/reservas"},"Listado reservas"),r.a.createElement(Z.a,{color:"textPrimary"},"Seleccionar mesa")),r.a.createElement(Z.a,{component:"h1",variant:"h5"},"Reserva: ",a.name.toUpperCase()),r.a.createElement("span",null,r.a.createElement(We.a,{color:"secondary"}),"Turno 1"),r.a.createElement("span",{className:"turno2-text"},r.a.createElement(We.a,{color:"primary"}),"Turno 2"),r.a.createElement("div",{className:"button-mesa__container"},o))}}]),a}(n.Component),Be=a(207),ze=P.b.alert,Ue=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).updateReserva=n.updateReserva.bind(Object(u.a)(n)),n.getMesas=n.getMesas.bind(Object(u.a)(n)),n.changeMesa=n.changeMesa.bind(Object(u.a)(n)),n.resetValues=n.resetValues.bind(Object(u.a)(n)),n.state={currentReserva:{key:null,id:0,name:"",adentro:!1,mesa:0,cantidad:"",date:I()((new Date).getTime()).format("DD-MM-YYYY"),turno:"turno1"},type:"",reservas:[],open:!1,turno:"",submitted:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(this.props.location.search){var e=Be.parse(this.props.location.search);W.getAll().orderByChild("date").equalTo(e.date).once("value",this.getMesas)}}},{key:"componentWillUnmount",value:function(){W.getAll().off("child_added",this.onDataChange)}},{key:"getMesas",value:function(e){var t=[];e.forEach((function(e){var a=e.val(),n=e.key;t.push({key:n,name:a.name,id:a.id,mesa:a.mesa,turno:a.turno,date:a.date,cantidad:a.cantidad,activa:a.activa||!1})})),this.setState({reservas:t,date:Be.parse(this.props.location.search).date})}},{key:"changeMesa",value:function(e,t,a,n){var r=this,o=""!==this.state.turno?a.filter((function(e){return e.turno===r.state.turno}))[0]:a[0];this.setState({currentReserva:o,type:n})}},{key:"selectTurno",value:function(e){this.setState({turno:e})}},{key:"resetValues",value:function(){this.setState({type:"",open:!1,turno:""})}},{key:"updateReserva",value:function(e,t,a,n){var r=this,o={mesa:t,activa:!0},i={activa:!0,mesa:this.state.currentReserva.mesa},c=""!==a&&a.length>1?a.filter((function(e){return e.turno===r.state.currentReserva.turno})):a;a&&"free"===n&&W.update(c[0].key,{activa:!1,mesa:""}).then((function(){P.c.success("Mesa liberada correctamente!!",1),window.location.reload()})).catch((function(e){P.c.fail("Ocurri\xf3 un error !!!",2)})),"assign"===this.state.type&&W.update(this.state.currentReserva.key,o).then((function(){P.c.success("Mesa actualizada correctamente!!",1),window.location.reload()})).catch((function(e){P.c.fail("Ocurri\xf3 un error !!!",2)})),"transport"===this.state.type&&(W.update(c[0].key,i).then().catch((function(e){P.c.fail("Ocurri\xf3 un error !!!",2)})),W.update(this.state.currentReserva.key,o).then((function(){P.c.success("Mesa actualizada correctamente!!",1),window.location.reload()})).catch((function(e){P.c.fail("Ocurri\xf3 un error !!!",2)})))}},{key:"render",value:function(){var e=this,t=this.state,a=t.currentReserva,n=t.reservas,o=t.type,i=[];return B.forEach((function(t,c){var l=n.filter((function(e){return e.mesa===t})),s=l.filter((function(e){return e.turno===a.turno})),u="";l.length>1&&(u="button-mesa two-colors"),1===l.length&&(u="button-mesa ".concat(l[0].turno)),i.push(r.a.createElement("button",{disabled:l.length>0&&"assign"===o&&s.length>0||0===l.length&&""===o||"transport"===o&&(0===l.length||s.length<=0),key:c,className:l.length>0?u:"button-mesa",onClick:function(n){if(l.length>0&&""===o){var i=1===l.length?l[0].name:s[0].name,c=1===l.length?l[0].turno:s[0].turno,u=1===l.length?l[0].cantidad:s[0].cantidad;ze("Actualizar mesas",r.a.createElement("div",null,r.a.createElement("span",{className:"detail__reserva-modal"},"Nombre: ",i),r.a.createElement("span",{className:"detail__reserva-modal"},"Turno: ",c),r.a.createElement("span",{className:"detail__reserva-modal"},"Cant. Personas: ",u)),[{text:"Asignar nueva mesa",onPress:function(){return e.changeMesa(n,t,l,"assign")}},{text:"Intercambiar mesas",onPress:function(){return e.changeMesa(n,t,l,"transport")}},{text:"Liberar mesa",onPress:function(){return e.updateReserva(n,t,l,"free")}},{text:"Cancelar",onPress:function(){return e.resetValues()}}]),l.length>1&&ze("Actualizar mesas",r.a.createElement("div",null,"Seleccionar turno"),[{text:"Turno 1",onPress:function(){return e.selectTurno("turno1")}},{text:"Turno 2",onPress:function(){return e.selectTurno("turno2")}},{text:"Cancelar",onPress:function(){return e.resetValues()}}])}"assign"===o&&(n.preventDefault(),e.updateReserva(n,t,a,"")),"transport"===o&&(n.preventDefault(),e.updateReserva(n,t,l,""))}},t))})),r.a.createElement(Q.a,{className:"map__container",component:"main",maxWidth:"xs"},r.a.createElement(Ie.a,{separator:r.a.createElement(Ve.a,{fontSize:"small"}),"aria-label":"breadcrumb"},r.a.createElement(ne.a,{color:"primary",href:"/forest/reservas"},"Listado reservas"),r.a.createElement(Z.a,{color:"textPrimary"},"Seleccionar mesa")),r.a.createElement(Z.a,{component:"h1",variant:"h5"},"Reservas del ",this.state.date),r.a.createElement("span",null,r.a.createElement(We.a,{color:"secondary"}),"Turno 1"),r.a.createElement("span",{className:"turno2-text"},r.a.createElement(We.a,{color:"primary"}),"Turno 2"),r.a.createElement("div",{className:"button-mesa__container"},i))}}]),a}(n.Component),$e=C.ref("/clients"),Ge=new(function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(){return $e}},{key:"create",value:function(e){return $e.push(e)}},{key:"update",value:function(e,t){return $e.child(e).update(t)}},{key:"delete",value:function(e){return $e.child(e).remove()}},{key:"deleteAll",value:function(){return $e.remove()}}]),e}()),Je=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onChangeValues=n.onChangeValues.bind(Object(u.a)(n)),n.onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.saveClient=n.saveClient.bind(Object(u.a)(n)),n.newClient=n.newClient.bind(Object(u.a)(n)),n.onChangeDay=n.onChangeDay.bind(Object(u.a)(n)),n.state={barrio:"",domicilio:"",dni:"",formato_comercial:"",razon_social:"",telefono:"",estado:"no visitado",motivo:"",lastId:0,dia:1,condicionIva:"",submitted:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Ge.getAll().orderByChild("id").limitToLast(1).once("child_added",this.onDataChange)}},{key:"componentWillUnmount",value:function(){Ge.getAll().off("child_added",this.onDataChange)}},{key:"onDataChange",value:function(e){this.setState({lastId:e.val().id||0})}},{key:"onChangeValues",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(G.a)({},t,a))}},{key:"onChangeDay",value:function(e){this.setState({dia:e.target.value})}},{key:"saveClient",value:function(){var e=this,t={id:this.state.lastId+1,razon_social:this.state.razon_social,domicilio:this.state.domicilio,dni:this.state.dni,barrio:this.state.barrio,formato_comercial:this.state.formato_comercial,telefono:this.state.telefono,dia:this.state.dia,motivo:this.state.motivo,estado:this.state.estado,condicionIva:this.state.condicionIva};Ge.create(t).then((function(){e.setState({submitted:!0,lastId:e.state.lastId+1})})).catch((function(e){console.log(e)}))}},{key:"newClient",value:function(){this.setState({barrio:"",domicilio:"",dni:"",formato_comercial:"",razon_social:"",telefono:"",estado:"no visitado",motivo:"",dia:1,condicionIva:"",submitted:!1})}},{key:"render",value:function(){return r.a.createElement(Q.a,{component:"main",maxWidth:"xs"},this.state.submitted?r.a.createElement("div",null,r.a.createElement("h4",null,"Cliente creado correctamente!"),r.a.createElement("button",{className:"btn btn-success",onClick:this.newClient},"Nuevo"),r.a.createElement("a",{className:"btn btn-primary go-listado",href:"/list-client",role:"button"},"Listado")):r.a.createElement("div",{className:"form-container"},r.a.createElement(Z.a,{component:"h1",variant:"h5"},"Nuevo Cliente"),r.a.createElement("div",{className:"login-container"},r.a.createElement(X.a,{container:!0,spacing:2},r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{name:"razon_social",variant:"outlined",required:!0,fullWidth:!0,autoFocus:!0,id:"razon_social",label:"Raz\xf3n social",value:this.state.razon_social,onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{name:"dni",variant:"outlined",fullWidth:!0,id:"dni",value:this.state.dni,label:"DNI/CUIT",onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,id:"domicilio",label:"Domicilio",value:this.state.domicilio,name:"domicilio",onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",fullWidth:!0,id:"barrio",label:"Barrio",value:this.state.barrio,name:"barrio",onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",fullWidth:!0,id:"formato_comercial",label:"Formato comercial",value:this.state.formato_comercial,name:"formato_comercial",onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,id:"telefono",label:"Tel\xe9fono",name:"telefono",value:this.state.telefono,onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(he.a,null,"D\xeda"),r.a.createElement(ve.a,{onChange:this.onChangeDay,value:this.state.dia,className:"select__form",fullWidth:!0},z.map((function(e){return r.a.createElement(pe.a,{key:e.value,value:e.value,name:"dia"},e.name)})))),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",fullWidth:!0,id:"condicionIva",label:"Condici\xf3n IVA",name:"condicionIva",value:this.state.condicionIva,onChange:this.onChangeValues}))),r.a.createElement(M.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:"button__save",onClick:this.saveClient},"Aceptar"))))}}]),a}(n.Component),He=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={currentClient:{key:null,id:0,barrio:"",domicilio:"",dni:"",formato_comercial:"",razon_social:"",telefono:"",dia:1,motivo:"",estado:"",condicionIva:""},submitted:!1},n.updateClient=n.updateClient.bind(Object(u.a)(n)),n.onChangeValues=n.onChangeValues.bind(Object(u.a)(n)),n.onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.onChangeDay=n.onChangeDay.bind(Object(u.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=parseInt(this.props.match.params.id,10);Ge.getAll().orderByChild("id").equalTo(e).once("value",this.onDataChange)}},{key:"onDataChange",value:function(e){var t=Object.keys(e.val()),a=e.val()[t];a.key=t[0],this.setState({currentClient:a})}},{key:"onChangeValues",value:function(e){var t=e.target.name,a=e.target.value;this.setState({currentClient:Object(b.a)(Object(b.a)({},this.state.currentClient),{},Object(G.a)({},t,a))})}},{key:"onChangeDay",value:function(e){this.setState({currentClient:Object(b.a)(Object(b.a)({},this.state.currentClient),{},{dia:e.target.value})})}},{key:"updateClient",value:function(){var e=this,t={id:this.state.currentClient.id,barrio:this.state.currentClient.barrio,domicilio:this.state.currentClient.domicilio,dni:this.state.currentClient.dni,formato_comercial:this.state.currentClient.formato_comercial,razon_social:this.state.currentClient.razon_social,telefono:this.state.currentClient.telefono,dia:this.state.currentClient.dia,motivo:this.state.currentClient.motivo,estado:this.state.currentClient.estado,condicionIva:this.state.currentClient.condicionIva};Ge.update(this.state.currentClient.key,t).then((function(){e.setState({submitted:!0})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement(Q.a,{component:"main",maxWidth:"xs"},this.state.submitted?r.a.createElement("div",null,r.a.createElement("h4",null,"Cliente editado correctamente!"),r.a.createElement("a",{className:"btn btn-primary go-listado",href:"/client",role:"button"},"Nuevo"),r.a.createElement("a",{className:"btn btn-primary go-listado",href:"/list-client",role:"button"},"Listado")):r.a.createElement("div",{className:"form-container"},r.a.createElement(Z.a,{component:"h1",variant:"h5"},"Editar Cliente"),r.a.createElement("div",{className:"login-container"},r.a.createElement(X.a,{container:!0,spacing:2},r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{name:"id",variant:"outlined",disabled:!0,fullWidth:!0,id:"id",label:"ID",value:this.state.currentClient.id})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{name:"razon_social",variant:"outlined",required:!0,fullWidth:!0,id:"razon_social",label:"Raz\xf3n social",value:this.state.currentClient.razon_social,onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{name:"dni",variant:"outlined",required:!0,fullWidth:!0,id:"dni",value:this.state.currentClient.dni,label:"DNI/CUIT",onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,id:"domicilio",label:"Domicilio",value:this.state.currentClient.domicilio,name:"domicilio",onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,id:"barrio",label:"Barrio",value:this.state.currentClient.barrio,name:"barrio",onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,id:"formato_comercial",label:"Formato comercial",value:this.state.currentClient.formato_comercial,name:"formato_comercial",onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,id:"telefono",label:"Tel\xe9fono",name:"telefono",value:this.state.currentClient.telefono,onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(he.a,null,"D\xeda"),r.a.createElement(ve.a,{onChange:this.onChangeDay,value:this.state.currentClient.dia,className:"select__form",fullWidth:!0},z.map((function(e){return r.a.createElement(pe.a,{key:e.value,value:e.value},e.name)})))),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",fullWidth:!0,id:"condicionIva",label:"Condici\xf3n IVA",name:"condicionIva",value:this.state.currentClient.condicionIva,onChange:this.onChangeValues}))),r.a.createElement(M.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:"button__save",onClick:this.updateClient},"Aceptar"))))}}]),a}(n.Component),Qe=a(58),Ke=a.n(Qe),Ze=P.b.alert,Xe=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).refreshList=n.refreshList.bind(Object(u.a)(n)),n.setActiveTutorial=n.setActiveTutorial.bind(Object(u.a)(n)),n.deleteClient=n.deleteClient.bind(Object(u.a)(n)),n.onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(u.a)(n)),n.onChangeTurno=n.onChangeTurno.bind(Object(u.a)(n)),n.searchTitle=n.searchTitle.bind(Object(u.a)(n)),n.state={clients:[],currentTutorial:null,currentIndex:-1,nombre:"",domicilio:"",dni:0,clientFilter:[],searchTitle:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Ge.getAll().orderByChild("id").on("value",this.onDataChange)}},{key:"componentWillUnmount",value:function(){Ge.getAll().off("value",this.onDataChange)}},{key:"onDataChange",value:function(e){var t=[];e.forEach((function(e){var a=e.val(),n=e.key;t.push({key:n,id:a.id,razonSocial:a.razon_social,domicilio:a.domicilio,dni:a.dni,telefono:a.telefono})})),this.setState({clients:t})}},{key:"searchTitle",value:function(e){var t=this,a=this.state.clients;clearTimeout(this.timer);var n=e.target.value;this.timer=setTimeout((function(){if(n){a.forEach((function(e){return e.domicilio.toLowerCase()}));var e=a.filter((function(e){return e.razonSocial.toLowerCase().match(n.toLowerCase())||e.domicilio.toLowerCase().match(n.toLowerCase())}));t.setState({clientFilter:e,searchTitle:n})}else t.setState({searchTitle:""})}),500)}},{key:"onChangeDate",value:function(e){var t=e.format("DD-MM-YYYY");this.setState({date:t})}},{key:"onChangeTurno",value:function(e){this.setState({turno:e.target.value})}},{key:"refreshList",value:function(){this.setState({currentTutorial:null,currentIndex:-1})}},{key:"setActiveTutorial",value:function(e,t){this.setState({currentTutorial:e,currentIndex:t})}},{key:"deleteClient",value:function(e){Ge.delete(e).then((function(){P.c.success("Eliminado correctamente!!",1)})).catch((function(e){P.c.fail("Ocurri\xf3 un error",1)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.clients,n=t.searchTitle,o=t.clientFilter,i=""!==n?o:a;return r.a.createElement("div",{className:"list row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"new-reservation"},r.a.createElement("a",{className:"btn btn-primary",href:"/client",role:"button"},"Nuevo cliente")),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Buscar",onChange:this.searchTitle}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-secondary",type:"button"},r.a.createElement(Ke.a,{color:"action"}))))),r.a.createElement("h4",null,"Listado de clientes"),r.a.createElement("div",{className:"table-container"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"ID"),r.a.createElement("th",{scope:"col"},"Raz\xf3n Social"),r.a.createElement("th",{scope:"col"},"Direcci\xf3n"),r.a.createElement("th",{scope:"col"},"DNI/CUIT"),r.a.createElement("th",{scope:"col"},"Tel\xe9fono"),r.a.createElement("th",{scope:"col"},"Acciones"))),r.a.createElement("tbody",null,a&&i.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.id),r.a.createElement("td",null,r.a.createElement("a",{href:"/pedido/".concat(t.id)},t.razonSocial)),r.a.createElement("td",null,t.domicilio),r.a.createElement("td",null,t.dni),r.a.createElement("td",null,t.telefono),r.a.createElement("td",{className:"column-actions"},r.a.createElement("a",{className:"btn btn-light",href:"/client/".concat(t.id),role:"button"},"Editar"),r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){return Ze("Eliminar","Est\xe1s seguro???",[{text:"Cancelar"},{text:"Ok",onPress:function(){return e.deleteClient(t.key)}}])}},"Eliminar")))})))))))}}]),a}(n.Component),et=C.ref("/productos"),tt=new(function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(){return et}},{key:"create",value:function(e){return et.push(e)}},{key:"update",value:function(e,t){return et.child(e).update(t)}},{key:"delete",value:function(e){return et.child(e).remove()}},{key:"deleteAll",value:function(){return et.remove()}}]),e}()),at=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onChangeCodigo=n.onChangeCodigo.bind(Object(u.a)(n)),n.onChangeDescripcion=n.onChangeDescripcion.bind(Object(u.a)(n)),n.onChangeMarca=n.onChangeMarca.bind(Object(u.a)(n)),n.onChangeStock=n.onChangeStock.bind(Object(u.a)(n)),n.onChangePrecio=n.onChangePrecio.bind(Object(u.a)(n)),n.onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.saveProduct=n.saveProduct.bind(Object(u.a)(n)),n.newProduct=n.newProduct.bind(Object(u.a)(n)),n.onChangeValues=n.onChangeValues.bind(Object(u.a)(n)),n.state={codigo:"",descripcion:"",marca:"Windy",precio:"",stock:0,lastId:0,peso:1,submitted:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){tt.getAll().orderByChild("id").limitToLast(1).once("child_added",this.onDataChange)}},{key:"componentWillUnmount",value:function(){tt.getAll().off("child_added",this.onDataChange)}},{key:"onDataChange",value:function(e){this.setState({lastId:e.val().id||0}),console.log(e.val().id)}},{key:"onChangeCodigo",value:function(e){this.setState({codigo:e.target.value})}},{key:"onChangeDescripcion",value:function(e){this.setState({descripcion:e.target.value})}},{key:"onChangeMarca",value:function(e){this.setState({marca:e.target.value})}},{key:"onChangePrecio",value:function(e){this.setState({precio:e.target.value})}},{key:"onChangeStock",value:function(e){this.setState({stock:e.target.value})}},{key:"onChangeValues",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(G.a)({},t,a))}},{key:"saveProduct",value:function(){var e=this,t={id:this.state.lastId+1,codigo:this.state.codigo,descripcion:this.state.descripcion,stock:parseInt(this.state.stock,10),marca:this.state.marca,precio:this.state.precio,peso:this.state.peso};tt.create(t).then((function(){e.setState({submitted:!0,lastId:e.state.lastId+1})})).catch((function(e){console.log(e)}))}},{key:"newProduct",value:function(){this.setState({codigo:"",descripcion:"",stock:0,marca:"Windy",precio:"",lastId:this.state.lastId,submitted:!1})}},{key:"render",value:function(){return r.a.createElement(Q.a,{component:"main",maxWidth:"xs"},this.state.submitted?r.a.createElement("div",null,r.a.createElement("h4",null,"Producto creado correctamente!"),r.a.createElement("button",{className:"btn btn-success",onClick:this.newProduct},"Nuevo"),r.a.createElement("a",{className:"btn btn-primary go-listado",href:"/list-products",role:"button"},"Listado")):r.a.createElement("div",{className:"form-container"},r.a.createElement(Z.a,{component:"h1",variant:"h5"},"Nuevo Producto"),r.a.createElement("div",{className:"login-container"},r.a.createElement(X.a,{container:!0,spacing:2},r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,className:"default__textfield",id:"codigo",label:"C\xf3digo",value:this.state.codigo,name:"codigo",onChange:this.onChangeCodigo})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,className:"default__textfield",id:"descripcion",label:"Descripci\xf3n",value:this.state.descripcion,name:"descripcion",onChange:this.onChangeDescripcion})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(he.a,null,"Marca"),r.a.createElement(ve.a,{onChange:this.onChangeMarca,value:this.state.marca,className:"select__form",fullWidth:!0},F.map((function(e){return r.a.createElement(pe.a,{key:e,value:e},e)})))),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,className:"default__textfield",id:"peso",label:"Peso",value:this.state.peso,name:"peso",onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,className:"default__textfield",id:"precio",label:"Precio",value:this.state.precio,name:"precio",onChange:this.onChangePrecio})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,className:"default__textfield",id:"stock",label:"Stock",value:this.state.stock,name:"stock",onChange:this.onChangeStock}))),r.a.createElement(M.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:"button__save",onClick:this.saveProduct},"Aceptar"))))}}]),a}(n.Component),nt=P.b.alert,rt=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).refreshList=n.refreshList.bind(Object(u.a)(n)),n.setActiveProduct=n.setActiveProduct.bind(Object(u.a)(n)),n.onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(u.a)(n)),n.onChangeTurno=n.onChangeTurno.bind(Object(u.a)(n)),n.searchTitle=n.searchTitle.bind(Object(u.a)(n)),n.onChangeSearchTitle=n.onChangeSearchTitle.bind(Object(u.a)(n)),n.deleteProduct=n.deleteProduct.bind(Object(u.a)(n)),n.state={products:[],currentProduct:null,currentIndex:-1,productoFilter:[],searchTitle:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){tt.getAll().orderByChild("id").on("value",this.onDataChange)}},{key:"componentWillUnmount",value:function(){tt.getAll().off("value",this.onDataChange)}},{key:"onDataChange",value:function(e){var t=[];e.forEach((function(e){var a=e.key,n=e.val();t.push({key:a,id:n.id,codigo:n.codigo,descripcion:n.descripcion,peso:n.peso,marca:n.marca,stock:n.stock,precio:n.precio})})),this.setState({products:t})}},{key:"onChangeSearchTitle",value:function(e){var t=e.target.value;this.setState({searchTitle:t})}},{key:"searchTitle",value:function(e){var t=this,a=this.state.products;clearTimeout(this.timer);var n=e.target.value;this.timer=setTimeout((function(){if(n){var e=a.filter((function(e){return e.descripcion.toLowerCase().match(n.toLowerCase())||e.codigo.toLowerCase().match(n.toLowerCase())||e.marca.toLowerCase().match(n.toLowerCase())}));t.setState({productoFilter:e,searchTitle:n})}else t.setState({searchTitle:""})}),500)}},{key:"onChangeDate",value:function(e){var t=e.format("DD-MM-YYYY");this.setState({date:t})}},{key:"onChangeTurno",value:function(e){this.setState({turno:e.target.value})}},{key:"refreshList",value:function(){this.setState({currentProduct:null,currentIndex:-1})}},{key:"setActiveProduct",value:function(e,t){this.setState({currentProduct:e,currentIndex:t})}},{key:"deleteProduct",value:function(e){tt.delete(e).then((function(){P.c.success("Eliminado correctamente!!",1)})).catch((function(e){P.c.fail("Ocurri\xf3 un error",1)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.products,n=t.searchTitle,o=t.productoFilter,i=""!==n?o:a;return r.a.createElement("div",{className:"list row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"new-reservation"},r.a.createElement("a",{className:"btn btn-primary",href:"/products",role:"button"},"Nuevo producto"),r.a.createElement("a",{className:"btn btn-primary change-price-button",href:"/change-price",role:"button"},"Cambiar precios masivamente")),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Buscar",onChange:this.searchTitle}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-secondary search-button",type:"button"},r.a.createElement(Ke.a,{color:"action"}))))),r.a.createElement("h4",null,"Listado de productos"),r.a.createElement("div",{className:"table-container"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"C\xf3digo"),r.a.createElement("th",{scope:"col"},"Descripci\xf3n"),r.a.createElement("th",{scope:"col"},"Peso"),r.a.createElement("th",{scope:"col"},"Marca"),r.a.createElement("th",{scope:"col"},"Stock"),r.a.createElement("th",{scope:"col"},"Precio"),r.a.createElement("th",{scope:"col"},"Acciones"))),r.a.createElement("tbody",null,a&&i.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.codigo),r.a.createElement("td",null,t.descripcion),r.a.createElement("td",null,t.peso),r.a.createElement("td",null,t.marca),r.a.createElement("td",null,t.stock),r.a.createElement("td",null,"$",t.precio),r.a.createElement("td",{className:"column-actions"},r.a.createElement("a",{className:"btn btn-light",href:"/product/".concat(t.id),role:"button"},"Editar"),r.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:function(){return nt("Eliminar","Est\xe1s seguro???",[{text:"Cancelar"},{text:"Ok",onPress:function(){return e.deleteProduct(t.key)}}])}},"Eliminar")))})))))))}}]),a}(n.Component),ot=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onChangeCodigo=n.onChangeCodigo.bind(Object(u.a)(n)),n.onChangeDescripcion=n.onChangeDescripcion.bind(Object(u.a)(n)),n.onChangeMarca=n.onChangeMarca.bind(Object(u.a)(n)),n.onChangeStock=n.onChangeStock.bind(Object(u.a)(n)),n.onChangePrecio=n.onChangePrecio.bind(Object(u.a)(n)),n.onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.updateProduct=n.updateProduct.bind(Object(u.a)(n)),n.onChangeValues=n.onChangeValues.bind(Object(u.a)(n)),n.state={currentProduct:{key:null,id:0,codigo:"",descripcion:"",marca:"",precio:"",stock:0,peso:1},submitted:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=parseInt(this.props.match.params.id,10);tt.getAll().orderByChild("id").equalTo(e).once("value",this.onDataChange)}},{key:"onDataChange",value:function(e){var t=Object.keys(e.val()),a=e.val()[t];a.key=t[0],this.setState({currentProduct:a})}},{key:"onChangeCodigo",value:function(e){this.setState({currentProduct:Object(b.a)(Object(b.a)({},this.state.currentProduct),{},{codigo:e.target.value})})}},{key:"onChangeDescripcion",value:function(e){this.setState({currentProduct:Object(b.a)(Object(b.a)({},this.state.currentProduct),{},{descripcion:e.target.value})})}},{key:"onChangeMarca",value:function(e){this.setState({currentProduct:Object(b.a)(Object(b.a)({},this.state.currentProduct),{},{marca:e.target.value})})}},{key:"onChangePrecio",value:function(e){this.setState({currentProduct:Object(b.a)(Object(b.a)({},this.state.currentProduct),{},{precio:e.target.value})})}},{key:"onChangeStock",value:function(e){this.setState({currentProduct:Object(b.a)(Object(b.a)({},this.state.currentProduct),{},{stock:e.target.value})})}},{key:"onChangeValues",value:function(e){var t=e.target.name,a=e.target.value;this.setState({currentProduct:Object(b.a)(Object(b.a)({},this.state.currentProduct),{},Object(G.a)({},t,a))})}},{key:"updateProduct",value:function(){var e=this,t={id:this.state.currentProduct.id,codigo:this.state.currentProduct.codigo,descripcion:this.state.currentProduct.descripcion,stock:parseInt(this.state.currentProduct.stock,10),marca:this.state.currentProduct.marca,precio:this.state.currentProduct.precio,peso:this.state.currentProduct.peso};tt.update(this.state.currentProduct.key,t).then((function(){e.setState({submitted:!0})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement(Q.a,{component:"main",maxWidth:"xs"},this.state.submitted?r.a.createElement("div",null,r.a.createElement("h4",null,"Producto editado correctamente!"),r.a.createElement("a",{className:"btn btn-primary go-listado",href:"/list-products",role:"button"},"Listado")):r.a.createElement("div",{className:"form-container"},r.a.createElement(Z.a,{component:"h1",variant:"h5"},"Editar producto"),r.a.createElement("div",{className:"login-container"},r.a.createElement(X.a,{container:!0,spacing:2},r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,className:"default__textfield",id:"codigo",label:"C\xf3digo",value:this.state.currentProduct.codigo,name:"codigo",onChange:this.onChangeCodigo})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,className:"default__textfield",id:"descripcion",label:"Descripci\xf3n",value:this.state.currentProduct.descripcion,name:"descripcion",onChange:this.onChangeDescripcion})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(he.a,null,"Marca"),r.a.createElement(ve.a,{onChange:this.onChangeMarca,value:this.state.currentProduct.marca,className:"select__form",fullWidth:!0},F.map((function(e){return r.a.createElement(pe.a,{key:e,value:e},e)})))),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,className:"default__textfield",id:"peso",label:"Peso",value:this.state.currentProduct.peso,name:"peso",onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,className:"default__textfield",id:"precio",label:"Precio",value:this.state.currentProduct.precio,name:"precio",onChange:this.onChangePrecio})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,className:"default__textfield",id:"stock",label:"Stock",value:this.state.currentProduct.stock,name:"stock",onChange:this.onChangeStock}))),r.a.createElement(M.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:"button__save",onClick:this.updateProduct},"Aceptar"))))}}]),a}(n.Component),it=a(591),ct=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onChangePorcentaje=n.onChangePorcentaje.bind(Object(u.a)(n)),n.onChangeMarca=n.onChangeMarca.bind(Object(u.a)(n)),n.onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.updateProduct=n.updateProduct.bind(Object(u.a)(n)),n.state={products:[],submitted:!1,porcentaje:0,marca:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){tt.getAll().orderByChild("id").once("value",this.onDataChange)}},{key:"onDataChange",value:function(e){var t=[];e.forEach((function(e){var a=e.key,n=e.val();t.push({key:a,id:n.id,codigo:n.codigo,descripcion:n.descripcion,marca:n.marca,stock:n.stock,precio:n.precio})})),this.setState({products:t})}},{key:"onChangePorcentaje",value:function(e){this.setState({porcentaje:e.target.value})}},{key:"onChangeMarca",value:function(e){this.setState({marca:e.target.value})}},{key:"updateProduct",value:function(){var e=this,t=this.state,a=t.products,n=t.porcentaje,r=t.marca,o=[];a.filter((function(e){return e.marca===r})).forEach((function(e){var t={key:e.key,precio:parseInt(e.precio,10)+n*parseInt(e.precio,10)/100};o.push(t)})),n>0&&o.forEach((function(t){var a={precio:t.precio};tt.update(t.key,a).then((function(){e.setState({submitted:!0})})).catch((function(e){console.log(e)}))}))}},{key:"render",value:function(){return r.a.createElement(Q.a,{component:"main",maxWidth:"xs"},this.state.submitted?r.a.createElement("div",null,r.a.createElement("h4",null,"Precios editados correctamente!"),r.a.createElement("a",{className:"btn btn-primary go-listado",href:"/list-products",role:"button"},"Listado"),r.a.createElement("a",{className:"btn btn-primary go-listado",href:"/change-price",role:"button"},"Editar nuevamente")):r.a.createElement("div",{className:"form-container"},r.a.createElement(Z.a,{component:"h1",variant:"h5"},"Editar precio"),r.a.createElement("div",{className:"login-container"},r.a.createElement(X.a,{container:!0,spacing:2},r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,className:"default__textfield",id:"porcentaje",label:"Porcentaje",value:this.state.porcentaje,name:"porcentaje",onChange:this.onChangePorcentaje,InputProps:{endAdornment:r.a.createElement(it.a,{position:"end"},"%")}})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(he.a,null,"Marca"),r.a.createElement(ve.a,{onChange:this.onChangeMarca,value:this.state.marca,className:"select__form",fullWidth:!0},F.map((function(e){return r.a.createElement(pe.a,{key:e,value:e},e)}))))),r.a.createElement(M.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:"button__save",onClick:this.updateProduct,disabled:this.state.porcentaje<=0},"Aceptar"))))}}]),a}(n.Component),lt=a(592),st=a(593),ut=a(594),dt=a(595),mt=a(596),ht=a(597),vt=C.ref("/pedidos"),pt=new(function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(){return vt}},{key:"create",value:function(e){return vt.push(e)}},{key:"update",value:function(e,t){return vt.child(e).update(t)}},{key:"delete",value:function(e){return vt.child(e).remove()}},{key:"deleteAll",value:function(){return vt.remove()}}]),e}()),bt=a(164),ft=a.n(bt),gt=a(114),Et=a.n(gt),Ct=a(113),yt=a.n(Ct),kt=P.b.alert,Nt=P.a.Item,Ot=Nt.Brief,Dt=JSON.parse(localStorage.getItem("currentUser")),jt=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.searchTitle=n.searchTitle.bind(Object(u.a)(n)),n.onChangeSearchTitle=n.onChangeSearchTitle.bind(Object(u.a)(n)),n.setActive=n.setActive.bind(Object(u.a)(n)),n.onChangeCantidad=n.onChangeCantidad.bind(Object(u.a)(n)),n.onChangePeso=n.onChangePeso.bind(Object(u.a)(n)),n.onChangeDto=n.onChangeDto.bind(Object(u.a)(n)),n.onChangeIva=n.onChangeIva.bind(Object(u.a)(n)),n.addPedido=n.addPedido.bind(Object(u.a)(n)),n.setInitialProduct=n.setInitialProduct.bind(Object(u.a)(n)),n.getLastId=n.getLastId.bind(Object(u.a)(n)),n.createPedido=n.createPedido.bind(Object(u.a)(n)),n.getClient=n.getClient.bind(Object(u.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(u.a)(n)),n.setOpen=n.setOpen.bind(Object(u.a)(n)),n.deleteProduct=n.deleteProduct.bind(Object(u.a)(n)),n.state={products:[],currentProduct:null,lastId:0,peso:"1",cantidad:"",descuento:"",indexActive:-1,pedido:{id:0,idCliente:0,clienteName:"",clienteDomicilio:"",productos:[],fecha:I()((new Date).getTime()).format("DD-MM-YYYY hh:mm"),total:0,status:"Creado",fechaEntrega:I()((new Date).getTime()).add(1,"days").format("DD-MM-YYYY"),user:Dt.userName},searchTitle:"",productoFilter:[],iva:!1,medioIva:!1,submitted:!1,keyClient:"",open:!1,editProd:!1,indexProdOpen:-1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=parseInt(this.props.match.params.id,10);pt.getAll().orderByChild("id").limitToLast(1).once("child_added",this.getLastId),tt.getAll().orderByChild("id").once("value",this.onDataChange),Ge.getAll().orderByChild("id").equalTo(e).once("child_added",this.getClient)}},{key:"componentWillUnmount",value:function(){tt.getAll().off("value",this.onDataChange),pt.getAll().off("child_added",this.getLastId),Ge.getAll().off("child_added",this.getClient)}},{key:"onDataChange",value:function(e){var t=[];e.forEach((function(e){var a=e.val();t.push({id:a.id,codigo:a.codigo,descripcion:a.descripcion,marca:a.marca,stock:a.stock,precio:a.precio,peso:a.peso})})),this.setState({products:t})}},{key:"getLastId",value:function(e){this.setState({lastId:e.val().id||0}),this.setInitialProduct()}},{key:"setInitialProduct",value:function(){var e=this.state.lastId,t=parseInt(this.props.match.params.id,10);this.setState({pedido:{id:e+1,idCliente:t,clienteName:"",clienteDomicilio:"",status:"Creado",productos:[],fecha:I()((new Date).getTime()).format("DD-MM-YYYY hh:mm"),total:0,fechaEntrega:I()((new Date).getTime()).add(1,"days").format("DD-MM-YYYY"),user:Dt.userName}})}},{key:"getClient",value:function(e){this.setState({pedido:Object(b.a)(Object(b.a)({},this.state.pedido),{},{clienteName:e.val().razon_social||"",clienteDomicilio:e.val().domicilio||""}),keyClient:e.key})}},{key:"onChangeSearchTitle",value:function(e){var t=e.target.value;this.setState({searchTitle:t})}},{key:"searchTitle",value:function(e){var t=this,a=this.state.products;clearTimeout(this.timer);var n=e.target.value;this.timer=setTimeout((function(){if(n){var e=a.filter((function(e){return e.descripcion.toLowerCase().match(n.toLowerCase())||e.codigo.toLowerCase().match(n.toLowerCase())}));t.setState({productoFilter:e,searchTitle:n})}else t.setState({searchTitle:""})}),500)}},{key:"setActive",value:function(e,t){this.setState({indexActive:t,peso:e})}},{key:"onChangeCantidad",value:function(e){this.setState({cantidad:e.target.value})}},{key:"onChangeDto",value:function(e){this.setState({descuento:e.target.value})}},{key:"onChangePeso",value:function(e){this.setState({peso:e.target.value})}},{key:"onChangeIva",value:function(e){var t=e.target.value;this.setState(Object(G.a)({},t,!this.state[t]))}},{key:"onChangeDate",value:function(e){var t=e.format("DD-MM-YYYY");this.setState({pedido:Object(b.a)(Object(b.a)({},this.state.pedido),{},{fechaEntrega:t})})}},{key:"addPedido",value:function(e,t){var a=this.state,n=a.products,r=a.cantidad,o=a.peso,i=a.descuento,c=a.iva,l=a.medioIva,s=n.filter((function(e){return e.id===t})),u="No";c&&(u="iva"),l&&(u="medioIva");var d={codigo:s[0].codigo,descripcion:s[0].descripcion,marca:s[0].marca,precio:s[0].precio,peso:o,cantidad:r,descuento:i,iva:u,subtotal:e};this.state.pedido.productos.push(d);var m=this.state.pedido.total+e;this.setState({pedido:Object(b.a)(Object(b.a)({},this.state.pedido),{},{total:m}),cantidad:"",descuento:"",indexActive:-1,iva:!1,medioIva:!1}),P.c.success("Cargado correctamente!!",1)}},{key:"createPedido",value:function(e){var t=this,a={id:this.state.pedido.id,idCliente:this.state.pedido.idCliente,clienteName:this.state.pedido.clienteName,clienteDomicilio:this.state.pedido.clienteDomicilio,productos:this.state.pedido.productos,fecha:this.state.pedido.fecha,status:this.state.pedido.status,fechaEntrega:this.state.pedido.fechaEntrega,user:Dt.userName,condPago:e,total:this.state.pedido.total};Ge.update(this.state.keyClient,{estado:"visitado"}).then((function(){})).catch((function(e){P.c.fail("Ocurri\xf3 un error !!!",2)})),pt.create(a).then((function(){P.c.loading("Loading...",1,(function(){t.setState({submitted:!0})}))})).catch((function(e){P.c.fail("Ocurri\xf3 un error !!!",2)}))}},{key:"setOpen",value:function(){this.setState({open:!this.state.open})}},{key:"deleteProduct",value:function(e){var t=this.state.pedido,a=t.productos.findIndex((function(t){return t.codigo===e}));t.productos.splice(a,1);var n=0;t.productos.forEach((function(e){n+=e.subtotal})),this.setState({pedido:Object(b.a)(Object(b.a)({},this.state.pedido),{},{total:n})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.submitted,n=t.products,o=t.searchTitle,i=t.indexActive,c=t.descuento,l=t.cantidad,s=t.productoFilter,u=t.iva,d=t.medioIva,m=t.peso,h=t.pedido,v=t.open,p=(t.editProd,t.indexProdOpen,""!==o?s:n),b=0,f=u?.21:.105;return r.a.createElement("div",{className:"list row"},a?r.a.createElement("div",null,r.a.createElement("h4",null,"Pedido creado correctamente!"),r.a.createElement("a",{className:"btn btn-primary go-listado",href:"/new-visit",role:"button"},"Nuevo Pedido"),r.a.createElement("a",{className:"btn btn-primary go-listado",href:"/list-pedidos",role:"button"},"Listado")):r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Buscar",onChange:this.searchTitle}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-secondary search-button",type:"button",onClick:this.searchTitle},r.a.createElement(Ke.a,{color:"action"}))))),r.a.createElement("h4",null,"Pedido - ",h.clienteName),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"fecha"},"Fecha de entrega de pedido"),r.a.createElement(_.a,{className:"post-input  post-input__event",dateFormat:"DD-MM-YYYY",timeFormat:!1,name:"eventDate",utc:!0,closeOnSelect:!0,value:h.fechaEntrega,onChange:this.onChangeDate})),r.a.createElement(ne.a,{component:"button",variant:"body2",className:"open-products",onClick:this.setOpen},"Mostrar productos del pedido",v?r.a.createElement(yt.a,null):r.a.createElement(Et.a,null)),v&&r.a.createElement(lt.a,{className:"table-products__container",component:be.a},r.a.createElement(st.a,{size:"small","aria-label":"a dense table"},r.a.createElement(ut.a,null,r.a.createElement(dt.a,null,r.a.createElement(mt.a,null),r.a.createElement(mt.a,null,"C\xf3digo"),r.a.createElement(mt.a,null,"Precio"),r.a.createElement(mt.a,null,"Peso"),r.a.createElement(mt.a,null,"Cant."),r.a.createElement(mt.a,null,"Descripci\xf3n"),r.a.createElement(mt.a,null,"Marca"),r.a.createElement(mt.a,null,"Descuento"),r.a.createElement(mt.a,null,"IVA"),r.a.createElement(mt.a,{align:"right"},"Subtotal"))),r.a.createElement(ht.a,null,h.productos&&h.productos.map((function(t,a){return r.a.createElement(dt.a,{key:t.codigo},r.a.createElement(mt.a,null,r.a.createElement(fe.a,{color:"secondary","aria-label":"eliminar",component:"span",size:"small",onClick:function(){return kt("Eliminar","Eliminar producto?",[{text:"Cancelar"},{text:"Ok",onPress:function(){return e.deleteProduct(t.codigo)}}])}},r.a.createElement(ft.a,null))),r.a.createElement(mt.a,{component:"th",scope:"row"},t.codigo),r.a.createElement(mt.a,null,"$",t.precio),r.a.createElement(mt.a,null,t.peso),r.a.createElement(mt.a,null,t.cantidad),r.a.createElement(mt.a,null,t.descripcion),r.a.createElement(mt.a,null,t.marca),r.a.createElement(mt.a,null,t.descuento),r.a.createElement(mt.a,null,t.iva),r.a.createElement(mt.a,{align:"right"},"$",t.subtotal.toFixed(2)))}))))),r.a.createElement("div",{className:"table-container pedido"},n&&p.map((function(t,a){var n=i===a;if(n){var o=t.precio*m*l;b=o-o*c/100+(u||d?o*f:0)}return r.a.createElement(P.a,{className:"my-list",key:a},r.a.createElement(Nt,{multipleLine:!0,onClick:function(r){r.preventDefault(),n||e.setActive(t.peso,a)},wrap:!0},r.a.createElement("div",{className:"prod__description-container"},r.a.createElement("span",{className:"prod__description"},t.descripcion," "),r.a.createElement(Ot,null,t.marca),r.a.createElement("span",{className:"prod__codigo-text"},"#",t.codigo),r.a.createElement("span",{className:"am-list-extra precio"},"$",t.precio),r.a.createElement("span",{className:"prod__stock-text"},"S: ",t.stock),n&&r.a.createElement("div",null,r.a.createElement(te.a,{control:r.a.createElement(ae.a,{color:"default",checked:u,onChange:e.onChangeIva,value:"iva"}),label:"IVA"}),r.a.createElement(te.a,{control:r.a.createElement(ae.a,{color:"default",checked:d,onChange:e.onChangeIva,value:"medioIva"}),label:"1/2 IVA"}),r.a.createElement(ee.a,{id:"standard-read-only-input",className:"prod__subtotal",label:"Subtotal",value:b.toFixed(2),InputProps:{readOnly:!0,startAdornment:r.a.createElement(it.a,{position:"start"},"$")}}))),n&&r.a.createElement("div",{className:"prod__codigo-container"},r.a.createElement(ee.a,{id:"standard-start-adornment",type:"number",onChange:e.onChangePeso,value:n?m:"",InputProps:{endAdornment:r.a.createElement(it.a,{position:"end"},"Kg")}}),r.a.createElement(ee.a,{id:"standard-basic",label:"Cantidad",type:"number",value:n?l:"",onChange:e.onChangeCantidad}),r.a.createElement(ee.a,{id:"standard-basic",label:"Dto",type:"number",className:"input-dto",value:n?c:"",onChange:e.onChangeDto,InputProps:{endAdornment:r.a.createElement(it.a,{position:"end"},"%")}})),r.a.createElement("div",{className:"prod__button-container"},r.a.createElement(M.a,{className:"prod__button-add",variant:"contained",onClick:function(a){a.preventDefault(),e.addPedido(b,t.id)},disabled:!n||""===l||""===m},"Agregar"))))}))),r.a.createElement("div",{role:"region",className:"total-banner"},r.a.createElement("p",{className:"total__text"},"Total: $ ",h.total.toFixed(2)),r.a.createElement(M.a,{variant:"contained",color:"primary",className:"total__button",onClick:function(){return kt("Tipo cobro",r.a.createElement("div",null),[{text:"Contado",onPress:function(){return e.createPedido("contado")}},{text:"Contado 7 dias",onPress:function(){return e.createPedido("a 7 dias")}},{text:"Contado 14 dias",onPress:function(){return e.createPedido("a 14 dias")}},{text:"Contado 21 dias",onPress:function(){return e.createPedido("a 21 dias")}},{text:"Cancelar"}])},disabled:0===h.total},"Finalizar pedido"))))}}]),a}(n.Component),xt=a(600),Tt=a(601),St=a(299),_t=a.n(St),Pt=a(300),Mt=a.n(Pt),wt=a(298),Yt=a.n(wt),At=a(77),It=a(13),Lt=a(598),Vt=a(28),Rt=a(617),Wt=a(599),Ft=a(213),qt=a(297),Bt=a.n(qt),zt=P.b.alert;function Ut(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var $t=[{id:"codigo",numeric:!1,disablePadding:!0,label:"C\xf3digo"},{id:"peso",numeric:!1,disablePadding:!0,label:"Peso"},{id:"cantidad",numeric:!1,disablePadding:!1,label:"Cantidad"},{id:"descripcion",numeric:!1,disablePadding:!1,label:"Descripci\xf3n"},{id:"marca",numeric:!1,disablePadding:!1,label:"Marca"},{id:"subtotal",numeric:!0,disablePadding:!1,label:"Subtotal"}];function Gt(e){var t=e.classes,a=e.onSelectAllClick,n=e.order,o=e.orderBy,i=e.numSelected,c=e.rowCount,l=e.onRequestSort,s=e.pedido;return r.a.createElement(ut.a,null,r.a.createElement(dt.a,null,r.a.createElement(mt.a,{padding:"checkbox"},r.a.createElement(ae.a,{indeterminate:i>0&&i<c,checked:c>0&&i===c,onChange:a,inputProps:{"aria-label":"select all desserts"},disabled:"Confirmado"===s.status})),$t.map((function(e){return r.a.createElement(mt.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:o===e.id&&n},r.a.createElement(Rt.a,{active:o===e.id,direction:o===e.id?n:"asc",onClick:(a=e.id,function(e){l(e,a)})},e.label,o===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===n?"sorted descending":"sorted ascending"):null));var a}))))}var Jt=Object(Lt.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(Vt.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"},button:{color:"#fff",backgroundColor:"#388e3c","&:hover":{backgroundColor:"#008000"}}}}),Ft.esES),Ht=function(e){var t=Jt(),a=e.numSelected,n=e.onChangeClick,o=e.updatePedido,i=e.pedido;return r.a.createElement(Wt.a,{className:Object(It.a)(t.root,Object(G.a)({},t.highlight,a>0))},a>0?r.a.createElement(Z.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div"},a," seleccionado"):r.a.createElement(Z.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div"},"Detalle de pedido"),a>0?r.a.createElement(fe.a,{"aria-label":"delete",onClick:n,disabled:"Confirmado"===i.status},r.a.createElement(Y.a,null)):r.a.createElement(M.a,{variant:"contained",disabled:"Confirmado"===i.status,onClick:function(){return zt("Asentar visita",r.a.createElement("div",null,"Registrar pedido"),[{text:"Pagado / Entregado",onPress:function(){return o("Pagado / Entregado")}},{text:"Cta Corriente / Entregado",onPress:function(){return o("Cta Corriente / Entregado")}},{text:"Rechazado",onPress:function(){return o("Rechazado")}},{text:"Cancelar"}])},className:t.button,endIcon:r.a.createElement(Bt.a,null)},"Confirmar"))},Qt=Object(Lt.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}),Ft.esES);function Kt(e){var t=Qt(),a=r.a.useState(e.productos),n=Object(At.a)(a,2),o=n[0],i=n[1],c=r.a.useState(e.pedido),l=Object(At.a)(c,2),s=l[0],u=(l[1],r.a.useState("asc")),d=Object(At.a)(u,2),m=d[0],h=d[1],v=r.a.useState("calories"),p=Object(At.a)(v,2),b=p[0],f=p[1],g=r.a.useState([]),E=Object(At.a)(g,2),C=E[0],y=E[1],k=r.a.useState(0),N=Object(At.a)(k,2),O=N[0],D=(N[1],r.a.useState(!0)),j=Object(At.a)(D,2),x=j[0],T=(j[1],r.a.useState(e.productos.length)),S=Object(At.a)(T,2),_=S[0],M=(S[1],[]);o.forEach((function(e){return M.push((t=e.codigo,a=e.peso,n=e.cantidad,r=e.descripcion,o=e.marca,i=e.subtotal,{codigo:t,peso:a,cantidad:n,descripcion:r,marca:o,subtotal:i}));var t,a,n,r,o,i}));var w=_-Math.min(_,M.length-O*_);return r.a.createElement("div",{className:t.root},r.a.createElement(be.a,{className:t.paper},r.a.createElement(Ht,{onChangeClick:function(){C.forEach((function(e){var t=o.findIndex((function(t){return t.codigo===e}));o.splice(t,1)})),i(o),y([])},numSelected:C.length,updatePedido:function(e){var t=0,a=e;o.forEach((function(e){t+=e.subtotal}));var n={id:s.id,clienteName:s.clienteName,idCliente:s.idCliente,fecha:s.fecha,status:a,productos:o,fechaConfirm:I()((new Date).getTime()).format("DD-MM-YYYY hh:mm"),total:t};pt.update(s.key,n).then((function(){P.c.success("Actualizado correctamente!!",1,(function(){window.location.reload(!1)}))})).catch((function(e){P.c.fail("Ocurri\xf3 un error !!!",1)}))},pedido:s}),r.a.createElement(lt.a,null,r.a.createElement(st.a,{className:t.table,"aria-labelledby":"tableTitle",size:x?"small":"medium","aria-label":"enhanced table"},r.a.createElement(Gt,{classes:t,numSelected:C.length,order:m,orderBy:b,onSelectAllClick:function(e){if(e.target.checked){var t=M.map((function(e){return e.codigo}));y(t)}else y([])},onRequestSort:function(e,t){h(b===t&&"asc"===m?"desc":"asc"),f(t)},rowCount:M.length,pedido:s}),r.a.createElement(ht.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(M,function(e,t){return"desc"===e?function(e,a){return Ut(e,a,t)}:function(e,a){return-Ut(e,a,t)}}(m,b)).slice(O*_,O*_+_).map((function(e,t){var a,n=(a=e.codigo,-1!==C.indexOf(a)),o="enhanced-table-checkbox-".concat(t);return r.a.createElement(dt.a,{hover:!0,onClick:function(t){return function(e,t){var a=[],n=C.indexOf(t);-1===n?a=a.concat(C,t):0===n?a=a.concat(C.slice(1)):n===C.length-1?a=a.concat(C.slice(0,-1)):n>0&&(a=a.concat(C.slice(0,n),C.slice(n+1))),y(a)}(0,e.codigo)},role:"checkbox","aria-checked":n,tabIndex:-1,key:e.codigo,selected:n},r.a.createElement(mt.a,{padding:"checkbox"},r.a.createElement(ae.a,{checked:n,inputProps:{"aria-labelledby":o},disabled:"Confirmado"===s.status})),r.a.createElement(mt.a,{component:"th",id:o,scope:"row",padding:"none"},e.codigo),r.a.createElement(mt.a,null,e.peso),r.a.createElement(mt.a,null,e.cantidad),r.a.createElement(mt.a,null,e.descripcion),r.a.createElement(mt.a,null,e.marca),r.a.createElement(mt.a,{align:"right"},"$",e.subtotal.toFixed(2)))})),w>0&&r.a.createElement(dt.a,{style:{height:(x?33:53)*w}},r.a.createElement(mt.a,{colSpan:6})))))))}var Zt=a(165),Xt=a.n(Zt),ea=a(207),ta=P.b.alert,aa=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).refreshList=n.refreshList.bind(Object(u.a)(n)),n.setActiveTutorial=n.setActiveTutorial.bind(Object(u.a)(n)),n.onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(u.a)(n)),n.filterPedidos=n.filterPedidos.bind(Object(u.a)(n)),n.setOpen=n.setOpen.bind(Object(u.a)(n)),n.expandAll=n.expandAll.bind(Object(u.a)(n)),n.deletePedido=n.deletePedido.bind(Object(u.a)(n)),n.changeEntrega=n.changeEntrega.bind(Object(u.a)(n)),n.getClients=n.getClients.bind(Object(u.a)(n)),n.getClientsByDay=n.getClientsByDay.bind(Object(u.a)(n)),n.getQuantity=n.getQuantity.bind(Object(u.a)(n)),n.handleClose=n.handleClose.bind(Object(u.a)(n)),n.state={pedidos:[],date:ea.parse(n.props.location.search).date||I()((new Date).getTime()).format("DD-MM-YYYY"),pedidoFilter:[],open:!1,indexOpen:0,expandAll:!1,entregaPedido:ea.parse(n.props.location.search).entrega||!1,clients:[],cantVisitas:0,quantityProd:{},openModal:!1,prodDesc:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=I()((new Date).getTime()).get("day"),t=I()((new Date).getTime()).format("DD-MM-YYYY");if(this.props.location.search){var a=ea.parse(this.props.location.search),n=I()(a.date,"DD-MM-AAAA").get("day");this.getClients(n)}else window.location.href="/list-pedidos?date=".concat(t),this.getClients(e);pt.getAll().orderByChild("id").on("value",this.onDataChange)}},{key:"componentWillUnmount",value:function(){pt.getAll().off("value",this.onDataChange),Ge.getAll().off("value",this.onDataChange)}},{key:"onDataChange",value:function(e){var t=[];e.forEach((function(e){var a=e.val(),n=e.key;t.push({key:n,id:a.id,fecha:a.fecha,fechaEntrega:a.fechaEntrega,idCliente:a.idCliente,clienteName:a.clienteName,clienteDomicilio:a.clienteDomicilio,productos:a.productos,status:a.status,condPago:a.condPago||"",total:a.total})})),this.setState({pedidos:t}),this.filterPedidos()}},{key:"filterPedidos",value:function(e,t){var a=this.state,n=a.pedidos,r=a.date,o=a.entregaPedido,i=[],c=e||r;n.forEach((function(e){(o?e.fechaEntrega:e.fecha.slice(0,10))===c&&i.push(e)})),this.setState({pedidoFilter:i})}},{key:"getClients",value:function(e){Ge.getAll().orderByChild("dia").equalTo(e).on("value",this.getClientsByDay)}},{key:"getClientsByDay",value:function(e){var t=[],a=0;e&&(e.forEach((function(e){var a=e.val();t.push(a)})),t.forEach((function(e){"visitado"===e.estado&&(a+=1)}))),this.setState({clients:t,cantVisitas:a})}},{key:"onChangeDate",value:function(e){var t=e.format("DD-MM-YYYY");window.location.href=this.state.entregaPedido?"/list-pedidos?date=".concat(t,"&entrega=true"):"/list-pedidos?date=".concat(t)}},{key:"setOpen",value:function(e){this.setState({open:!this.state.open,indexOpen:e})}},{key:"refreshList",value:function(){this.setState({currentTutorial:null,currentIndex:-1})}},{key:"setActiveTutorial",value:function(e,t){this.setState({currentTutorial:e,currentIndex:t})}},{key:"deletePedido",value:function(e){pt.delete(e).then((function(){P.c.success("Eliminado correctamente!!",1,(function(){window.location.reload(!1)}))})).catch((function(e){P.c.fail("Ocurri\xf3 un error !!!",2)}))}},{key:"expandAll",value:function(){this.setState({expandAll:!this.state.expandAll,open:!0,indexOpen:-1})}},{key:"changeEntrega",value:function(){this.state.entregaPedido?window.location.href="/list-pedidos?date=".concat(this.state.date):window.location.href="/list-pedidos?date=".concat(this.state.date,"&entrega=true")}},{key:"getQuantity",value:function(){var e=this.state.pedidoFilter,t={},a=[];e.forEach((function(e){e.productos&&e.productos.forEach((function(e){var n=parseInt(e.cantidad,10),r={codigo:e.codigo,desc:e.descripcion};void 0===t[e.codigo]?t[e.codigo]=n:t[e.codigo]+=n,a.filter((function(t){return t.codigo===e.codigo})).length<1&&a.push(r)}))})),this.setState({openModal:!0,quantityProd:t,prodDesc:a})}},{key:"handleClose",value:function(){this.setState({openModal:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.pedidoFilter,n=t.open,o=t.indexOpen,i=t.expandAll,c=t.entregaPedido,l=t.clients,s=t.cantVisitas,u=t.openModal,d=t.quantityProd,m=t.prodDesc,h=0;a.forEach((function(e){return h+=e.total}));var v=Object.keys(d);return r.a.createElement("div",{className:"list row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"new-reservation"},r.a.createElement("a",{className:"btn btn-primary",href:"/new-visit",role:"button"},"Nuevo pedido"),r.a.createElement(M.a,{variant:"contained",color:"default",className:"inform-button",endIcon:r.a.createElement(Yt.a,null),onClick:this.getQuantity},"Cant. x prod.")),r.a.createElement(ge.a,{onClose:this.handleClose,"aria-labelledby":"customized-dialog-title",open:u},r.a.createElement(Ce.a,{dividers:!0},r.a.createElement(lt.a,{component:be.a},r.a.createElement(st.a,{size:"small"},r.a.createElement(ut.a,null,r.a.createElement(dt.a,null,r.a.createElement(mt.a,null,"C\xf3digo"),r.a.createElement(mt.a,null,"Descripci\xf3n"),r.a.createElement(mt.a,null,"Cantidad"))),r.a.createElement(ht.a,null,v.map((function(e){return r.a.createElement(dt.a,{key:e},r.a.createElement(mt.a,null,e),r.a.createElement(mt.a,null,m.filter((function(t){return t.codigo===e}))[0].desc),r.a.createElement(mt.a,null,d[e]))})))))),r.a.createElement(ye.a,null,r.a.createElement(M.a,{onClick:this.handleClose,color:"primary"},"Cerrar"))),r.a.createElement("h4",null,"Listado de pedidos"),r.a.createElement(be.a,{className:"info__pedidos"},r.a.createElement("div",{className:"container__info"},r.a.createElement("span",{className:"text__info"},"Cant. pedidos:"," ",r.a.createElement("p",{className:"text__dato"},a.length)),r.a.createElement("span",{className:"text__info-right"},"Cant. no venta:"," ",r.a.createElement("p",{className:"text__dato"},s-a.length)),r.a.createElement("span",{className:"text__info-right"},"Total del d\xeda: $"," ",r.a.createElement("p",{className:"text__dato"},h.toFixed(2)))),r.a.createElement("div",{className:"container__info"},r.a.createElement("span",{className:"text__info"},"Visitas: ",r.a.createElement("p",{className:"text__dato"},s)),r.a.createElement("span",{className:"text__info-right"},"Cant. clientes: ",r.a.createElement("p",{className:"text__dato"},l.length)))),r.a.createElement("div",{className:"form-group"},r.a.createElement(te.a,{control:r.a.createElement(xt.a,{checked:c,onChange:this.changeEntrega,size:"small",name:"checkedB",color:"primary"}),labelPlacement:"start",label:c?"Cambiar a fecha creaci\xf3n pedido":"Cambiar a fecha entrega pedido"}),r.a.createElement("label",{className:"fecha-text"},c?"Fecha entrega pedido":"Fecha creaci\xf3n pedido"),r.a.createElement(_.a,{className:"post-input  post-input__event",dateFormat:"DD-MM-YYYY",timeFormat:!1,name:"eventDate",utc:!0,closeOnSelect:!0,value:this.state.date,onChange:this.onChangeDate})),r.a.createElement("div",{className:"table-container"},r.a.createElement(lt.a,{component:be.a},r.a.createElement(st.a,{"aria-label":"collapsible table"},r.a.createElement(ut.a,null,r.a.createElement(dt.a,null,r.a.createElement(mt.a,null,r.a.createElement(Pe.a,{title:"Expandir todos"},r.a.createElement(fe.a,{color:"primary","aria-label":"expandir todos",onClick:this.expandAll,size:"small"},i?r.a.createElement(Mt.a,null):r.a.createElement(_t.a,null)))),r.a.createElement(mt.a,null,"Cliente"),r.a.createElement(mt.a,null,"Domicilio"),r.a.createElement(mt.a,null,"Tipo pago"),r.a.createElement(mt.a,null,"Total"),r.a.createElement(mt.a,null,"Estado"),r.a.createElement(mt.a,null,"Acciones"))),r.a.createElement(ht.a,null,a&&a.map((function(t,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(dt.a,null,r.a.createElement(mt.a,{onClick:function(t){t.preventDefault(),e.setOpen(a)}},t.productos&&r.a.createElement(fe.a,{"aria-label":"expand row",size:"small",onClick:function(t){t.preventDefault(),e.setOpen(a)}},n&&o===a?r.a.createElement(yt.a,null):r.a.createElement(Et.a,null))),r.a.createElement(mt.a,{component:"th",scope:"row",onClick:function(t){t.preventDefault(),e.setOpen(a)}},t.clienteName),r.a.createElement(mt.a,{component:"th",scope:"row",onClick:function(t){t.preventDefault(),e.setOpen(a)}},t.clienteDomicilio),r.a.createElement(mt.a,{component:"th",scope:"row",onClick:function(t){t.preventDefault(),e.setOpen(a)}},t.condPago),r.a.createElement(mt.a,{onClick:function(t){t.preventDefault(),e.setOpen(a)}},"$",t.total.toFixed(2)),r.a.createElement(mt.a,{className:"color__status ".concat(t.status.toLowerCase().split(" ")[0]),onClick:function(t){t.preventDefault(),e.setOpen(a)}},t.status),r.a.createElement(mt.a,null,r.a.createElement(fe.a,{"aria-label":"delete",className:"action__link",href:"/edit-pedido/".concat(t.id),role:"button"},r.a.createElement(Ne.a,null)),r.a.createElement(fe.a,{"aria-label":"delete",type:"button",className:"action__button",onClick:function(){return ta("Eliminar","Est\xe1s seguro???",[{text:"Cancelar"},{text:"Ok",onPress:function(){return e.deletePedido(t.key)}}])}},r.a.createElement(Y.a,{color:"secondary"})),r.a.createElement(fe.a,{href:"/imprimir/".concat(t.id),role:"button","aria-label":"imprimir",className:"action__link"},r.a.createElement(Xt.a,null)))),r.a.createElement(dt.a,null,r.a.createElement(mt.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6},n&&o===a&&t.productos&&r.a.createElement(Tt.a,{in:n,timeout:"auto",unmountOnExit:!0},r.a.createElement(re.a,{margin:1},r.a.createElement(Kt,{productos:t.productos,pedido:t}))),i&&t.productos&&r.a.createElement(Tt.a,{in:n,timeout:"auto",unmountOnExit:!0},r.a.createElement(re.a,{margin:1},r.a.createElement(Kt,{productos:t.productos,pedido:t}))))))}))))),0===a.length&&r.a.createElement("div",{className:"empty__container"},r.a.createElement("span",{className:"message-empty"},"No hay pedidos a\xfan")))))}}]),a}(n.Component),na=P.b.alert,ra=(P.b.prompt,JSON.parse(localStorage.getItem("currentUser")),P.a.Item),oa=ra.Brief,ia=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.searchTitle=n.searchTitle.bind(Object(u.a)(n)),n.onChangeSearchTitle=n.onChangeSearchTitle.bind(Object(u.a)(n)),n.setActive=n.setActive.bind(Object(u.a)(n)),n.onChangeCantidad=n.onChangeCantidad.bind(Object(u.a)(n)),n.onChangePeso=n.onChangePeso.bind(Object(u.a)(n)),n.onChangeDto=n.onChangeDto.bind(Object(u.a)(n)),n.onChangeIva=n.onChangeIva.bind(Object(u.a)(n)),n.onChangeIvaProd=n.onChangeIvaProd.bind(Object(u.a)(n)),n.addPedido=n.addPedido.bind(Object(u.a)(n)),n.updatePedido=n.updatePedido.bind(Object(u.a)(n)),n.getCurrentPedido=n.getCurrentPedido.bind(Object(u.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(u.a)(n)),n.setOpen=n.setOpen.bind(Object(u.a)(n)),n.deleteProduct=n.deleteProduct.bind(Object(u.a)(n)),n.handleClose=n.handleClose.bind(Object(u.a)(n)),n.handleOpenModal=n.handleOpenModal.bind(Object(u.a)(n)),n.editProduct=n.editProduct.bind(Object(u.a)(n)),n.onChangeValueProduct=n.onChangeValueProduct.bind(Object(u.a)(n)),n.state={products:[],peso:"1",cantidad:"",descuento:"",indexActive:-1,pedido:{key:null,id:0,idCliente:0,clienteName:"",productos:[],fecha:I()((new Date).getTime()).format("DD-MM-YYYY hh:mm"),total:0,status:"Creado",fechaEntrega:""},producto:{peso:"",cantidad:"",descuento:""},searchTitle:"",productoFilter:[],iva:!1,medioIva:!1,submitted:!1,open:!1,editProd:!1,indexProdOpen:-1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=parseInt(this.props.match.params.id,10);pt.getAll().orderByChild("id").equalTo(e).once("value",this.getCurrentPedido),tt.getAll().orderByChild("id").once("value",this.onDataChange)}},{key:"componentWillUnmount",value:function(){pt.getAll().off("value",this.getCurrentPedido)}},{key:"onDataChange",value:function(e){var t=[];e.forEach((function(e){var a=e.val();t.push({id:a.id,codigo:a.codigo,descripcion:a.descripcion,marca:a.marca,stock:a.stock,peso:a.peso,precio:a.precio})})),this.setState({products:t})}},{key:"getCurrentPedido",value:function(e){var t=Object.keys(e.val()),a=e.val()[t];a.key=t[0],this.setState({pedido:a})}},{key:"onChangeSearchTitle",value:function(e){var t=e.target.value;this.setState({searchTitle:t})}},{key:"searchTitle",value:function(e){var t=this,a=this.state.products;clearTimeout(this.timer);var n=e.target.value;this.timer=setTimeout((function(){if(n){var e=a.filter((function(e){return e.descripcion.toLowerCase().match(n.toLowerCase())||e.codigo.toLowerCase().match(n.toLowerCase())}));t.setState({productoFilter:e,searchTitle:n})}else t.setState({searchTitle:""})}),500)}},{key:"setActive",value:function(e,t){this.setState({indexActive:t,peso:e})}},{key:"onChangeCantidad",value:function(e){this.setState({cantidad:e.target.value})}},{key:"onChangeDto",value:function(e){this.setState({descuento:e.target.value})}},{key:"onChangePeso",value:function(e){this.setState({peso:e.target.value})}},{key:"onChangeIva",value:function(e){var t=e.target.value;this.setState(Object(G.a)({},t,!this.state[t]))}},{key:"onChangeDate",value:function(e){var t=e.format("DD-MM-YYYY");this.setState({pedido:Object(b.a)(Object(b.a)({},this.state.pedido),{},{fechaEntrega:t})})}},{key:"addPedido",value:function(e,t){var a=this.state,n=a.products,r=a.peso,o=a.cantidad,i=a.descuento,c=a.iva,l=a.medioIva,s=n.filter((function(e){return e.id===t})),u="No";c&&(u="iva"),l&&(u="medioIva");var d={codigo:s[0].codigo,descripcion:s[0].descripcion,marca:s[0].marca,precio:s[0].precio,peso:r,cantidad:o,descuento:i,iva:u,subtotal:e};this.state.pedido.productos.push(d);var m=this.state.pedido.total+e;this.setState({pedido:Object(b.a)(Object(b.a)({},this.state.pedido),{},{total:m}),cantidad:"",descuento:"",iva:!1,indexActive:-1,medioIva:!1}),P.c.success("Cargado correctamente!!",1)}},{key:"deleteProduct",value:function(e){var t=this.state.pedido,a=t.productos.findIndex((function(t){return t.codigo===e}));t.productos.splice(a,1);var n=0;t.productos.forEach((function(e){n+=e.subtotal})),this.setState({pedido:Object(b.a)(Object(b.a)({},this.state.pedido),{},{total:n})})}},{key:"handleOpenModal",value:function(e,t){this.setState({editProd:!0,indexProdOpen:e,producto:{peso:t.peso,cantidad:t.cantidad,descuento:t.descuento}})}},{key:"handleClose",value:function(){this.setState({editProd:!1,indexProdOpen:-1})}},{key:"onChangeValueProduct",value:function(e){var t=e.target.name,a=e.target.value;this.setState({producto:Object(b.a)(Object(b.a)({},this.state.producto),{},Object(G.a)({},t,a))})}},{key:"onChangeIvaProd",value:function(e){var t=e.target.value;this.setState(Object(G.a)({},t,!this.state[t]))}},{key:"editProduct",value:function(e){var t=this.state,a=t.pedido,n=t.producto,r=e.precio*n.peso*n.cantidad,o=r-r*n.descuento/100;e.peso=n.peso,e.cantidad=n.cantidad,e.descuento=n.descuento,e.subtotal=o;var i=0;a.productos.forEach((function(e){i+=e.subtotal})),this.setState({pedido:Object(b.a)(Object(b.a)({},this.state.pedido),{},{total:i}),editProd:!1,indexProdOpen:-1,producto:{cantidad:"",descuento:"",iva:""}})}},{key:"updatePedido",value:function(){var e=this,t={id:this.state.pedido.id,idCliente:this.state.pedido.idCliente,clienteName:this.state.pedido.clienteName,productos:this.state.pedido.productos,fecha:this.state.pedido.fecha,status:this.state.pedido.status,fechaEntrega:this.state.pedido.fechaEntrega,total:this.state.pedido.total};pt.update(this.state.pedido.key,t).then((function(){P.c.loading("Loading...",1,(function(){e.setState({submitted:!0})}))})).catch((function(e){P.c.fail("Ocurri\xf3 un error !!!",2)}))}},{key:"setOpen",value:function(){this.setState({open:!this.state.open})}},{key:"render",value:function(){var e=this,t=this.state,a=t.submitted,n=t.products,o=t.searchTitle,i=t.indexActive,c=t.peso,l=t.descuento,s=t.cantidad,u=t.productoFilter,d=t.iva,m=t.medioIva,h=t.pedido,v=t.open,p=t.editProd,b=t.indexProdOpen,f=t.producto,g=""!==o?u:n,E=0,C=d?.21:.105;return r.a.createElement("div",{className:"list row"},a?r.a.createElement("div",null,r.a.createElement("h4",null,"Pedido editado correctamente!"),r.a.createElement("a",{className:"btn btn-primary go-listado",href:"/new-visit",role:"button"},"Nuevo Pedido"),r.a.createElement("a",{className:"btn btn-primary go-listado",href:"/list-pedidos",role:"button"},"Listado")):r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Buscar",onChange:this.searchTitle}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-secondary search-button",type:"button",onClick:this.searchTitle},r.a.createElement(Ke.a,{color:"action"}))))),r.a.createElement("h4",null,"Editar Pedido - ",h.clienteName),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"fecha"},"Fecha de entrega de pedido"),r.a.createElement(_.a,{className:"post-input  post-input__event",dateFormat:"DD-MM-YYYY",timeFormat:!1,name:"eventDate",utc:!0,closeOnSelect:!0,value:h.fechaEntrega,onChange:this.onChangeDate})),r.a.createElement(ne.a,{component:"button",variant:"body2",className:"open-products",onClick:this.setOpen},"Mostrar productos del pedido",v?r.a.createElement(yt.a,null):r.a.createElement(Et.a,null)),v&&r.a.createElement(lt.a,{className:"table-products__container",component:be.a},r.a.createElement(st.a,{size:"small","aria-label":"a dense table"},r.a.createElement(ut.a,null,r.a.createElement(dt.a,null,r.a.createElement(mt.a,null),r.a.createElement(mt.a,null,"C\xf3digo"),r.a.createElement(mt.a,null,"Precio"),r.a.createElement(mt.a,null,"Peso"),r.a.createElement(mt.a,null,"Cant."),r.a.createElement(mt.a,null,"Descripci\xf3n"),r.a.createElement(mt.a,null,"Marca"),r.a.createElement(mt.a,null,"Descuento"),r.a.createElement(mt.a,null,"IVA"),r.a.createElement(mt.a,{align:"right"},"Subtotal"))),r.a.createElement(ht.a,null,h.productos.map((function(t,a){return r.a.createElement(dt.a,{key:t.codigo},r.a.createElement(mt.a,null,r.a.createElement(fe.a,{color:"secondary","aria-label":"eliminar",component:"span",size:"small",onClick:function(){return na("Eliminar","Eliminar producto?",[{text:"Cancelar"},{text:"Ok",onPress:function(){return e.deleteProduct(t.codigo)}}])}},r.a.createElement(ft.a,null)),r.a.createElement(fe.a,{className:"action__link",size:"small",onClick:function(n){n.preventDefault(),e.handleOpenModal(a,t)}},r.a.createElement(Ne.a,null)),r.a.createElement(ge.a,{open:p&&b===a,"aria-labelledby":"form-dialog-title"},r.a.createElement(Ee.a,{id:"form-dialog-title",onClose:e.handleClose},"Editar producto"),r.a.createElement(Ce.a,null,r.a.createElement(ee.a,{className:"prod-input",autoFocus:!0,fullWidth:!0,margin:"dense",name:"peso",label:"Peso",value:f.peso,onChange:e.onChangeValueProduct}),r.a.createElement(ee.a,{className:"prod-input",fullWidth:!0,margin:"dense",name:"cantidad",label:"Cant.",value:f.cantidad,onChange:e.onChangeValueProduct}),r.a.createElement(ee.a,{className:"prod-input",fullWidth:!0,name:"descuento",label:"Desc.",value:f.descuento,onChange:e.onChangeValueProduct})),r.a.createElement(ye.a,null,r.a.createElement(M.a,{color:"primary",onClick:e.handleClose},"Cancelar"),r.a.createElement(M.a,{color:"primary",onClick:function(a){a.preventDefault(),e.editProduct(t)},disabled:""===f.cantidad||""===f.peso},"Aceptar")))),r.a.createElement(mt.a,{component:"th",scope:"row"},t.codigo),r.a.createElement(mt.a,null,"$",t.precio),r.a.createElement(mt.a,null,t.peso),r.a.createElement(mt.a,null,t.cantidad),r.a.createElement(mt.a,null,t.descripcion),r.a.createElement(mt.a,null,t.marca),r.a.createElement(mt.a,null,t.descuento),r.a.createElement(mt.a,null,t.iva),r.a.createElement(mt.a,{align:"right"},"$",t.subtotal.toFixed(2)))}))))),r.a.createElement("div",{className:"table-container pedido"},n&&g.map((function(t,a){var n=i===a;if(n){var o=t.precio*c*s;E=o-o*l/100+(d||m?o*C:0)}return r.a.createElement(P.a,{className:"my-list",key:a},r.a.createElement(ra,{multipleLine:!0,onClick:function(r){r.preventDefault(),n||e.setActive(t.peso,a)},wrap:!0},r.a.createElement("div",{className:"prod__description-container"},r.a.createElement("span",{className:"prod__description"},t.descripcion," "),r.a.createElement(oa,null,t.marca),r.a.createElement("span",{className:"prod__codigo-text"},"#",t.codigo),r.a.createElement("span",{className:"am-list-extra precio"},"$",t.precio),r.a.createElement("span",{className:"prod__stock-text"},"S: ",t.stock),n&&r.a.createElement("div",null,r.a.createElement(te.a,{control:r.a.createElement(ae.a,{color:"default",checked:d,onChange:e.onChangeIva,value:"iva"}),label:"IVA"}),r.a.createElement(te.a,{control:r.a.createElement(ae.a,{color:"default",checked:m,onChange:e.onChangeIva,value:"medioIva"}),label:"1/2 IVA"}),r.a.createElement(ee.a,{id:"standard-read-only-input",className:"prod__subtotal",label:"Subtotal",value:E.toFixed(2),InputProps:{readOnly:!0,startAdornment:r.a.createElement(it.a,{position:"start"},"$")}}))),n&&r.a.createElement("div",{className:"prod__codigo-container"},r.a.createElement(ee.a,{id:"standard-start-adornment",type:"number",onChange:e.onChangePeso,value:n?c:"",InputProps:{endAdornment:r.a.createElement(it.a,{position:"end"},"Kg")}}),r.a.createElement(ee.a,{id:"standard-basic",label:"Cantidad",type:"number",value:n?s:"",onChange:e.onChangeCantidad}),r.a.createElement(ee.a,{id:"standard-basic",label:"Dto",type:"number",className:"input-dto",value:n?l:"",onChange:e.onChangeDto,InputProps:{endAdornment:r.a.createElement(it.a,{position:"end"},"%")}})),r.a.createElement("div",{className:"prod__button-container"},r.a.createElement(M.a,{className:"prod__button-add",variant:"contained",onClick:function(a){a.preventDefault(),e.addPedido(E,t.id)},disabled:!n||""===c||""===s},"Agregar"))))}))),r.a.createElement("div",{role:"region",className:"total-banner"},r.a.createElement("p",{className:"total__text"},"Total: $ ",h.total.toFixed(2)),r.a.createElement(M.a,{variant:"contained",color:"primary",className:"total__button",onClick:this.updatePedido},"Actualizar pedido"))))}}]),a}(n.Component),ca=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={pedido:{id:0,idCliente:0,clienteName:"",clienteDomicilio:"",productos:[],fecha:I()((new Date).getTime()).format("DD-MM-YYYY hh:mm"),total:0,status:"Creado",fechaEntrega:I()((new Date).getTime()).add(1,"days").format("DD-MM-YYYY")},currentClient:[]},n.getPedido=n.getPedido.bind(Object(u.a)(n)),n.print=n.print.bind(Object(u.a)(n)),n.getClient=n.getClient.bind(Object(u.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=parseInt(this.props.match.params.id,10);pt.getAll().orderByChild("id").equalTo(e).once("child_added",this.getPedido)}},{key:"componentWillUnmount",value:function(){pt.getAll().off("child_added",this.getPedido),Ge.getAll().off("value",this.getClient)}},{key:"getPedido",value:function(e){this.setState({pedido:e.val()}),Ge.getAll().orderByChild("id").equalTo(e.val().idCliente).once("value",this.getClient)}},{key:"getClient",value:function(e){var t=Object.keys(e.val()),a=e.val()[t];a.key=t[0],this.setState({currentClient:a})}},{key:"print",value:function(){var e=document.getElementById("printContent").innerHTML,t=document.body.innerHTML;document.body.innerHTML=e,window.print(),document.body.innerHTML=t}},{key:"render",value:function(){var e=this.state,t=e.pedido,a=e.currentClient,n=0;return r.a.createElement("div",{id:"printContent"},r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement(M.a,{variant:"contained",color:"default",onClick:this.print,endIcon:r.a.createElement(Xt.a,null),className:"button-print"},"Imprimir")),r.a.createElement("div",{className:"factura__container"},r.a.createElement("div",{className:"row section"},r.a.createElement("div",{className:"col-6"},r.a.createElement("span",{className:"client"},r.a.createElement("strong",null,"Cliente: ",t.idCliente.toString().padStart(5,"0")," -"," ",t.clienteName),r.a.createElement("br",null),r.a.createElement("p",{className:"client-detail"},"Domicilio: ",t.clienteDomicilio),r.a.createElement("br",null),r.a.createElement("p",{className:"client-cuit"},"CUIT: ",a.dni),r.a.createElement("p",{className:"client-detail right"},"Condici\xf3n IVA: ",a.condicionIva||"-")),r.a.createElement("p",{className:"vendedor"},r.a.createElement("strong",null,"Vendedor"),r.a.createElement("br",null),t.user)),r.a.createElement("div",{className:"col-4 details"},r.a.createElement("p",null,"Fecha:"," ",I()(t.fecha,"DD-MM-YYYY hh:mm").format("DD/MM/YYYY"),r.a.createElement("br",null),"Factura #: 001 - ",t.id.toString().padStart(5,"0"),r.a.createElement("br",null),t.condPago?"Cond. de pago: ".concat(t.condPago):""))),r.a.createElement("div",{className:"invoicelist-body"},r.a.createElement("table",{className:"table-container"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"5%"},"C\xf3digo"),r.a.createElement("th",{width:"60%"},"Descripci\xf3n"),r.a.createElement("th",{width:"10%"},"Cant."),r.a.createElement("th",{width:"10%"},"Peso"),r.a.createElement("th",{width:"15%"},"Precio"),r.a.createElement("th",null,"Bonif."),r.a.createElement("th",{width:"10%"},"Importe"))),r.a.createElement("tbody",null,t.productos.map((function(e,t){return n+=e.cantidad*e.peso*e.precio,r.a.createElement("tr",{key:t},r.a.createElement("td",{width:"5%"},r.a.createElement("span",null,e.codigo)),r.a.createElement("td",{width:"60%"},r.a.createElement("span",null,e.descripcion)),r.a.createElement("td",{className:"amount"},r.a.createElement("span",null,e.cantidad)),r.a.createElement("td",{className:"amount"},r.a.createElement("span",null,e.peso)),r.a.createElement("td",{className:"rate"},r.a.createElement("span",null,e.precio)),r.a.createElement("td",null,r.a.createElement("span",null,""!==e.descuento?"".concat(parseInt(e.descuento,10).toFixed(2),"%"):"0.00%")),r.a.createElement("td",{className:"rate"},r.a.createElement("span",null,e.subtotal.toFixed(2))))}))))),r.a.createElement("div",{className:"invoicelist-footer"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",null,"Subtotal:")),r.a.createElement("td",{className:"subtotal_price"},n.toFixed(2))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",null,"Descuentos:")),r.a.createElement("td",{className:"subtotal_price"},(n-t.total).toFixed(2))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("strong",null,"Total:")),r.a.createElement("td",{className:"total_price",id:"total_price"},t.total.toFixed(2))))))),r.a.createElement("div",{className:"factura__container"},r.a.createElement("div",{className:"row section"},r.a.createElement("div",{className:"col-6"},r.a.createElement("span",{className:"client"},r.a.createElement("strong",null,"Cliente: ",t.idCliente.toString().padStart(5,"0")," -"," ",t.clienteName),r.a.createElement("br",null),r.a.createElement("p",{className:"client-detail"},"Domicilio: ",t.clienteDomicilio),r.a.createElement("br",null),r.a.createElement("p",{className:"client-cuit"},"CUIT: ",a.dni),r.a.createElement("p",{className:"client-detail right"},"Condici\xf3n IVA: ",a.condicionIva||"-")),r.a.createElement("p",{className:"vendedor"},r.a.createElement("strong",null,"Vendedor"),r.a.createElement("br",null),t.user)),r.a.createElement("div",{className:"col-4 details"},r.a.createElement("p",null,"Fecha:"," ",I()(t.fecha,"DD-MM-YYYY hh:mm").format("DD/MM/YYYY"),r.a.createElement("br",null),"Factura #: 001 - ",t.id.toString().padStart(5,"0"),r.a.createElement("br",null),t.condPago?"Cond. de pago: ".concat(t.condPago):""))),r.a.createElement("div",{className:"invoicelist-body"},r.a.createElement("table",{className:"table-container"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{width:"5%"},"C\xf3digo"),r.a.createElement("th",{width:"60%"},"Descripci\xf3n"),r.a.createElement("th",{width:"10%"},"Cant."),r.a.createElement("th",{width:"10%"},"Peso"),r.a.createElement("th",{width:"15%"},"Precio"),r.a.createElement("th",null,"Bonif."),r.a.createElement("th",{width:"10%"},"Importe"))),r.a.createElement("tbody",null,t.productos.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",{width:"5%"},r.a.createElement("span",null,e.codigo)),r.a.createElement("td",{width:"60%"},r.a.createElement("span",null,e.descripcion)),r.a.createElement("td",{className:"amount"},r.a.createElement("span",null,e.cantidad)),r.a.createElement("td",{className:"amount"},r.a.createElement("span",null,e.peso)),r.a.createElement("td",{className:"rate"},r.a.createElement("span",null,e.precio)),r.a.createElement("td",null,r.a.createElement("span",null,""!==e.descuento?"".concat(parseInt(e.descuento,10).toFixed(2),"%"):"0.00%")),r.a.createElement("td",{className:"rate"},r.a.createElement("span",null,e.subtotal.toFixed(2))))}))))),r.a.createElement("div",{className:"invoicelist-footer"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",null,"Subtotal:")),r.a.createElement("td",{className:"subtotal_price"},n.toFixed(2))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",null,"Descuentos:")),r.a.createElement("td",{className:"subtotal_price"},(n-t.total).toFixed(2))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("strong",null,"Total:")),r.a.createElement("td",{className:"total_price",id:"total_price"},t.total.toFixed(2))))))))}}]),a}(n.Component),la=a(582),sa=P.b.alert,ua=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).refreshList=n.refreshList.bind(Object(u.a)(n)),n.setActiveTutorial=n.setActiveTutorial.bind(Object(u.a)(n)),n.onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.onChangeDay=n.onChangeDay.bind(Object(u.a)(n)),n.filterClients=n.filterClients.bind(Object(u.a)(n)),n.searchTitle=n.searchTitle.bind(Object(u.a)(n)),n.setMotivo=n.setMotivo.bind(Object(u.a)(n)),n.resetAll=n.resetAll.bind(Object(u.a)(n)),n.state={clients:[],estado:"",dia:I()((new Date).getTime()).get("day"),motivo:"",clientFilter:[],clientesPorDia:[],searchTitle:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){Ge.getAll().orderByChild("id").on("value",this.onDataChange)}},{key:"componentWillUnmount",value:function(){Ge.getAll().off("value",this.onDataChange)}},{key:"onDataChange",value:function(e){var t=[],a=I()((new Date).getTime()).get("day");e.forEach((function(e){var a=e.val(),n=e.key;t.push({key:n,id:a.id,razonSocial:a.razon_social,domicilio:a.domicilio,dni:a.dni,telefono:a.telefono,estado:a.estado,dia:a.dia,motivo:a.motivo})})),this.setState({clients:t}),this.filterClients(a)}},{key:"filterClients",value:function(e){var t=this.state,a=t.clients,n=t.dia,r=[],o=e||n;a.forEach((function(e){e.dia===o&&r.push(e)})),this.setState({clientesPorDia:r})}},{key:"searchTitle",value:function(e){var t=this,a=this.state.clientesPorDia;clearTimeout(this.timer);var n=e.target.value;this.timer=setTimeout((function(){if(n){a.forEach((function(e){return e.domicilio.toLowerCase()}));var e=a.filter((function(e){return e.razonSocial.toLowerCase().match(n.toLowerCase())||e.domicilio.toLowerCase().match(n.toLowerCase())}));t.setState({clientFilter:e,searchTitle:n})}else t.setState({searchTitle:""})}),500)}},{key:"onChangeDay",value:function(e){var t=e.target.value;this.setState({dia:t}),this.filterClients(t)}},{key:"refreshList",value:function(){this.setState({currentTutorial:null,currentIndex:-1})}},{key:"setActiveTutorial",value:function(e,t){this.setState({currentTutorial:e,currentIndex:t})}},{key:"setMotivo",value:function(e,t){var a={motivo:t,estado:"visitado"};Ge.update(e,a).then((function(){P.c.success("Visita actualizada!",1,(function(){window.location.reload(!1)}))})).catch((function(e){P.c.fail("Ocurri\xf3 un error !!!",2)}))}},{key:"resetAll",value:function(){var e=this,t={motivo:"",estado:"no visitado"};clearTimeout(this.timer),this.timer=setTimeout((function(){e.state.clientesPorDia.forEach((function(e){Ge.update(e.key,t).then((function(){})).catch((function(e){P.c.fail("Ocurri\xf3 un error al resetear algun estado!",2)}))})),P.c.success("Estados actualizados!",1,(function(){window.location.reload(!1)}))}),500)}},{key:"render",value:function(){var e=this,t=this.state,a=t.clients,n=t.searchTitle,o=t.clientFilter,i=t.clientesPorDia,c=""!==n?o:i;return r.a.createElement("div",{className:"list row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Buscar",onChange:this.searchTitle}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-secondary",type:"button"},r.a.createElement(Ke.a,{color:"action"}))))),r.a.createElement(M.a,{color:"primary",variant:"outlined",size:"small",onClick:this.resetAll,className:"button-reset"},"Resetear estados y motivos de clientes"),r.a.createElement("h4",{className:"title-list"},"Listado de clientes"),r.a.createElement(la.a,null,r.a.createElement(ve.a,{onChange:this.onChangeDay,value:this.state.dia,className:"select__day"},z.map((function(e){return r.a.createElement(pe.a,{key:e.value,value:e.value},e.name)})))),r.a.createElement("div",{className:"table-container"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"ID"),r.a.createElement("th",{scope:"col"},"Raz\xf3n Social"),r.a.createElement("th",{scope:"col"},"Direcci\xf3n"),r.a.createElement("th",{scope:"col"},"DNI/CUIT"),r.a.createElement("th",{scope:"col"},"Tel\xe9fono"),r.a.createElement("th",{scope:"col"},"Estado"),r.a.createElement("th",{scope:"col"},"Acciones"))),r.a.createElement("tbody",null,a&&c.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.id),r.a.createElement("td",null,r.a.createElement("a",{href:"/pedido/".concat(t.id)},t.razonSocial)),r.a.createElement("td",null,t.domicilio),r.a.createElement("td",null,t.dni),r.a.createElement("td",null,t.telefono),r.a.createElement("td",{className:"status-client"},t.estado),r.a.createElement("td",{className:"column-actions"},r.a.createElement(M.a,{color:"primary",size:"small",className:"button-register",disabled:"visitado"===t.estado,onClick:function(){return sa("Asentar visita",r.a.createElement("div",null,"Motivo de no visita"),[{text:"Ya tiene stock",onPress:function(){return e.setMotivo(t.key,"stock")}},{text:"Est\xe1 cerrado",onPress:function(){return e.setMotivo(t.key,"cerrado")}},{text:"No tiene dinero",onPress:function(){return e.setMotivo(t.key,"dinero")}},{text:"Ausente responsable",onPress:function(){return e.setMotivo(t.key,"ausente")}},{text:"Cancelar"}])}},"Registrar no venta")))})))))))}}]),a}(n.Component),da=a(614),ma=a(605),ha=C.ref("/pronosticos"),va=C.ref("/equipos"),pa=C.ref("/fechas"),ba=new(function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,[{key:"getPronos",value:function(){return ha}},{key:"getEquipos",value:function(){return va}},{key:"getFechas",value:function(){return pa}},{key:"create",value:function(e){return ha.push(e)}},{key:"update",value:function(e,t){return ha.child(e).update(t)}},{key:"delete",value:function(e){return ha.child(e).remove()}},{key:"deleteAll",value:function(){return ha.remove()}}]),e}()),fa=JSON.parse(localStorage.getItem("currentUser")),ga=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).getFechas=n.getFechas.bind(Object(u.a)(n)),n.onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.saveProduct=n.saveProduct.bind(Object(u.a)(n)),n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.state={pronostico:{userId:"",fecha:"",pronosticos:{}},competencia:"lpf",lastId:0,equipos:[],fechas:[],submitted:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){ba.getEquipos().orderByChild("id").once("value",this.onDataChange),ba.getFechas().once("child_added",this.getFechas)}},{key:"componentWillUnmount",value:function(){ba.getEquipos().off("child_added",this.onDataChange)}},{key:"onDataChange",value:function(e){var t=[];e.forEach((function(e){var a=e.val();t.push({id:a.id,equipo:a.equipo})})),this.setState({equipos:t})}},{key:"getFechas",value:function(e){var t=[];e.val().cruces.forEach((function(e){t.push({cruce:e.cruce})})),this.setState({fechas:t})}},{key:"handleChange",value:function(e,t){var a=this.state.pronostico;console.log(e.target.value);var n=e.target.value,r="cruce".concat(t);a.pronosticos[r]=n;var o=a.pronosticos;console.log("pronosss",o),this.setState({pronostico:Object(b.a)(Object(b.a)({},a),{},{pronosticos:o})})}},{key:"saveProduct",value:function(){var e=this,t={id:1,fecha:"fecha1",userName:fa.userName,pronosticos:this.state.pronostico.pronosticos};console.log(t),ba.create(t).then((function(){e.setState({submitted:!0,lastId:e.state.lastId+1})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.fechas,n=t.equipos;return r.a.createElement(Q.a,{component:"main",maxWidth:"xs"},this.state.submitted?r.a.createElement("div",null,r.a.createElement("h4",null,"Pron\xf3stico creado correctamente!"),r.a.createElement("a",{className:"btn btn-primary go-listado",href:"/positions",role:"button"},"Tabla de posiciones")):r.a.createElement("div",{className:"form-container"},r.a.createElement(Z.a,{component:"h1",variant:"h5"},"Pron\xf3stico"),a.map((function(t,a){var o=t.cruce.split(","),i=parseInt(o[0],10),c=parseInt(o[1],10);return r.a.createElement(be.a,{className:"container__cruce",key:a},r.a.createElement("div",null,r.a.createElement("span",{className:"title-results"},"L"),r.a.createElement("span",{className:"title-results"},"E"),r.a.createElement("span",{className:"title-results"},"V")),r.a.createElement("div",{className:"first-cruce"},r.a.createElement("span",null,n.filter((function(e){return e.id===i}))[0].equipo)),r.a.createElement("div",{className:"buttons-select"},r.a.createElement(da.a,{row:!0,"aria-label":"position",name:"position",defaultValue:"top"},r.a.createElement(ma.a,{onChange:function(t){return e.handleChange(t,a)},className:"radio-option",color:"primary",value:"L",name:"radio-button-demo",inputProps:{"aria-label":"A"}}),r.a.createElement(ma.a,{onChange:function(t){return e.handleChange(t,a)},color:"primary",value:"E",className:"radio-option",name:"radio-button-demo",inputProps:{"aria-label":"B"}}),r.a.createElement(ma.a,{onChange:function(t){return e.handleChange(t,a)},value:"V",color:"primary",className:"radio-option",name:"radio-button-demo",inputProps:{"aria-label":"D"}}))),r.a.createElement("div",{className:"second-cruce"},r.a.createElement("span",null,n.filter((function(e){return e.id===c}))[0].equipo)))})),r.a.createElement("div",{className:"login-container"},r.a.createElement(M.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:"button__save",onClick:this.saveProduct},"Aceptar"))))}}]),a}(n.Component),Ea=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.state={products:[],currentProduct:null,currentIndex:-1,productoFilter:[],searchTitle:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"onDataChange",value:function(e){var t=[];e.forEach((function(e){var a=e.key,n=e.val();t.push({key:a,id:n.id,codigo:n.codigo,descripcion:n.descripcion,marca:n.marca,stock:n.stock,precio:n.precio})})),this.setState({products:t})}},{key:"render",value:function(){return r.a.createElement("div",{className:"list row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("h4",null,"Tabla de posiciones"),r.a.createElement("div",{className:"table-container"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Nombre"),r.a.createElement("th",{scope:"col"},"Puntaje"))),r.a.createElement("tbody",null,r.a.createElement("tr",{key:1},r.a.createElement("td",null,"jcabrera"),r.a.createElement("td",null,15)))))))}}]),a}(n.Component),Ca=C.ref("/member"),ya=new(function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(){return Ca}},{key:"create",value:function(e){return Ca.push(e)}},{key:"update",value:function(e,t){return Ca.child(e).update(t)}},{key:"delete",value:function(e){return Ca.child(e).remove()}},{key:"deleteAll",value:function(){return Ca.remove()}}]),e}()),ka=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onChangeValues=n.onChangeValues.bind(Object(u.a)(n)),n.onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.saveClient=n.saveClient.bind(Object(u.a)(n)),n.newClient=n.newClient.bind(Object(u.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(u.a)(n)),n.onChangeDateVenc=n.onChangeDateVenc.bind(Object(u.a)(n)),n.state={nombre:"",dni:"",contacto:"",telefono:"",actividad:"",date:I()((new Date).getTime()).format("DD-MM-YYYY"),dateVenc:I()((new Date).getTime()).add(1,"month").format("DD-MM-YYYY"),lastId:0,submitted:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){ya.getAll().orderByChild("id").limitToLast(1).once("child_added",this.onDataChange)}},{key:"componentWillUnmount",value:function(){ya.getAll().off("child_added",this.onDataChange)}},{key:"onDataChange",value:function(e){this.setState({lastId:e.val().id||0})}},{key:"onChangeValues",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(G.a)({},t,a))}},{key:"onChangeDate",value:function(e){var t=e.format("DD-MM-YYYY");this.setState({date:t})}},{key:"onChangeDateVenc",value:function(e){var t=e.format("DD-MM-YYYY");this.setState({dateVenc:t})}},{key:"saveClient",value:function(){var e=this,t={id:this.state.lastId+1,nombre:this.state.nombre,dni:this.state.dni,contacto:this.state.contacto,telefono:this.state.telefono,date:this.state.date,dateVenc:this.state.dateVenc,actividad:this.state.actividad};ya.create(t).then((function(){e.setState({submitted:!0,lastId:e.state.lastId+1})})).catch((function(e){console.log(e)}))}},{key:"newClient",value:function(){this.setState({nombre:"",dni:"",contacto:"",telefono:"",actividad:"",date:I()((new Date).getTime()).format("DD-MM-YYYY"),dateVenc:I()((new Date).getTime()).add(1,"month").format("DD-MM-YYYY"),submitted:!1})}},{key:"render",value:function(){return r.a.createElement(Q.a,{component:"main",maxWidth:"xs"},this.state.submitted?r.a.createElement("div",null,r.a.createElement("h4",null,"Socio creado correctamente!"),r.a.createElement("button",{className:"btn btn-success",onClick:this.newClient},"Nuevo"),r.a.createElement("a",{className:"btn btn-primary go-listado",href:"/member-list",role:"button"},"Listado")):r.a.createElement("div",{className:"form-container"},r.a.createElement(Z.a,{component:"h1",variant:"h5"},"Nuevo Socio"),r.a.createElement("div",{className:"login-container"},r.a.createElement(X.a,{container:!0,spacing:2},r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,className:"default__textfield",id:"nombre",label:"Nombre y Apellido",value:this.state.nombre,name:"nombre",onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{name:"dni",required:!0,className:"default__textfield",variant:"outlined",fullWidth:!0,id:"dni",value:this.state.dni,label:"DNI",onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(he.a,null,"Fecha inicio"),r.a.createElement(_.a,{className:"post-input  post-input__event",dateFormat:"DD-MM-YYYY",timeFormat:!1,name:"date",utc:!0,closeOnSelect:!0,value:this.state.date,onChange:this.onChangeDate})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(he.a,null,"Fecha Vencimiento"),r.a.createElement(_.a,{className:"post-input  post-input__event",dateFormat:"DD-MM-YYYY",timeFormat:!1,name:"datevenc",utc:!0,closeOnSelect:!0,value:this.state.dateVenc,onChange:this.onChangeDateVenc})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,className:"default__textfield",id:"telefono",label:"Tel\xe9fono",name:"telefono",value:this.state.telefono,onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",className:"default__textfield",fullWidth:!0,id:"actividad",label:"Actividad",value:this.state.actividad,name:"actividad",onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",className:"default__textfield",fullWidth:!0,id:"contacto",label:"Contacto de emergencia",value:this.state.contacto,name:"contacto",onChange:this.onChangeValues}))),r.a.createElement(M.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:"button__save",onClick:this.saveClient},"Aceptar"))))}}]),a}(n.Component),Na=P.b.alert,Oa=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).refreshList=n.refreshList.bind(Object(u.a)(n)),n.setActiveProduct=n.setActiveProduct.bind(Object(u.a)(n)),n.onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(u.a)(n)),n.onChangeTurno=n.onChangeTurno.bind(Object(u.a)(n)),n.searchTitle=n.searchTitle.bind(Object(u.a)(n)),n.onChangeSearchTitle=n.onChangeSearchTitle.bind(Object(u.a)(n)),n.deleteMember=n.deleteMember.bind(Object(u.a)(n)),n.state={members:[],currentMember:null,currentIndex:-1,memberFilter:[],searchTitle:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){ya.getAll().orderByChild("id").on("value",this.onDataChange)}},{key:"componentWillUnmount",value:function(){ya.getAll().off("value",this.onDataChange)}},{key:"onDataChange",value:function(e){var t=[];e.forEach((function(e){var a=e.key,n=e.val();t.push({key:a,id:n.id,nombre:n.nombre,telefono:n.telefono,dni:n.dni,date:n.date,dateVenc:n.dateVenc,contacto:n.contacto,actividad:n.actividad})})),this.setState({members:t})}},{key:"onChangeSearchTitle",value:function(e){var t=e.target.value;this.setState({searchTitle:t})}},{key:"searchTitle",value:function(e){var t=this,a=this.state.members;clearTimeout(this.timer);var n=e.target.value;this.timer=setTimeout((function(){if(n){var e=a.filter((function(e){return e.nombre.toLowerCase().match(n.toLowerCase())||e.dni.toLowerCase().match(n.toLowerCase())}));t.setState({memberFilter:e,searchTitle:n})}else t.setState({searchTitle:""})}),500)}},{key:"onChangeDate",value:function(e){var t=e.format("DD-MM-YYYY");this.setState({date:t})}},{key:"onChangeTurno",value:function(e){this.setState({turno:e.target.value})}},{key:"refreshList",value:function(){this.setState({currentMember:null,currentIndex:-1})}},{key:"setActiveProduct",value:function(e,t){this.setState({currentMember:e,currentIndex:t})}},{key:"deleteMember",value:function(e){ya.delete(e).then((function(){P.c.success("Eliminado correctamente!!",1)})).catch((function(e){P.c.fail("Ocurri\xf3 un error",1)}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.members,n=t.searchTitle,o=t.memberFilter,i=""!==n?o:a,c=(""!==n&&o.length>0&&(I()(o[0].dateVenc,"DD-MM-YYYY").format("DD-MM-YYYY"),I()((new Date).getTime()).format("DD-MM-YYYY")),JSON.parse(localStorage.getItem("currentUser")));return r.a.createElement("div",{className:"list row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"new-reservation"},r.a.createElement("a",{className:"btn btn-primary",href:"/add-member",role:"button"},"Nuevo socio")),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Buscar por DNI o Nombre",onChange:this.searchTitle}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-outline-secondary search-button",type:"button"},r.a.createElement(Ke.a,{color:"action"}))))),r.a.createElement("h4",null,"Listado de Socios"),r.a.createElement("div",{className:"table-container"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Nombre"),r.a.createElement("th",{scope:"col"},"DNI"),r.a.createElement("th",{scope:"col"},"Actividad"),r.a.createElement("th",{scope:"col"},"Tel\xe9fono"),r.a.createElement("th",{scope:"col"},"Fecha inicio"),r.a.createElement("th",{scope:"col"},"Vencimiento"),r.a.createElement("th",{scope:"col"},"Contacto"),r.a.createElement("th",{scope:"col"},"Estado"),r.a.createElement("th",{scope:"col"},"Acciones"))),r.a.createElement("tbody",null,a&&i.map((function(t,a){var n=new Date,o=new Date(I()(t.dateVenc,"DD-MM-YYYY")).getTime()<n.getTime();return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.nombre),r.a.createElement("td",null,t.dni),r.a.createElement("td",null,t.actividad||""),r.a.createElement("td",null,t.telefono),r.a.createElement("td",null,t.date),r.a.createElement("td",null,t.dateVenc),r.a.createElement("td",null,t.contacto),r.a.createElement("td",{className:"color__status ".concat(o?"vencido":"habilitado")},o?"Vencido":"Habilitado"),r.a.createElement("td",null,c&&("admin"===c.rol||"lucasnovach"===c.userName)&&r.a.createElement(fe.a,{"aria-label":"delete",className:"action__link",href:"/members/".concat(t.id),role:"button"},r.a.createElement(Ne.a,null)),r.a.createElement(fe.a,{"aria-label":"delete",type:"button",className:"action__button",onClick:function(){return Na("Eliminar","Est\xe1s seguro???",[{text:"Cancelar"},{text:"Ok",onPress:function(){return e.deleteMember(t.key)}}])}},r.a.createElement(Y.a,{color:"secondary"}))))})))))))}}]),a}(n.Component),Da=a(301),ja=a.n(Da),xa=(P.b.alert,function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).refreshList=a.refreshList.bind(Object(u.a)(a)),a.onDataChange=a.onDataChange.bind(Object(u.a)(a)),a.searchTitle=a.searchTitle.bind(Object(u.a)(a)),a.onChangeSearchTitle=a.onChangeSearchTitle.bind(Object(u.a)(a)),a.onSubmit=a.onSubmit.bind(Object(u.a)(a)),a.state={members:[],currentMember:null,currentIndex:-1,memberFilter:[],searchTitle:"",statusMember:"",submitted:!1},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){ya.getAll().orderByChild("id").on("value",this.onDataChange)}},{key:"componentWillUnmount",value:function(){ya.getAll().off("value",this.onDataChange)}},{key:"onDataChange",value:function(e){var t=[];e.forEach((function(e){var a=e.key,n=e.val();t.push({key:a,id:n.id,nombre:n.nombre,telefono:n.telefono,dni:n.dni,date:n.date,dateVenc:n.dateVenc,contacto:n.contacto,actividad:n.actividad})})),this.setState({members:t})}},{key:"onChangeSearchTitle",value:function(e){var t=e.target.value;this.setState({searchTitle:t})}},{key:"searchTitle",value:function(e){var t=this,a=this.state.members;clearTimeout(this.timer);var n=e.target.value;this.timer=setTimeout((function(){if(n){var e=a.filter((function(e){return e.nombre.toLowerCase().match(n.toLowerCase())||e.dni.toLowerCase().match(n.toLowerCase())}));t.setState({memberFilter:e,searchTitle:n})}else t.setState({searchTitle:""})}),500)}},{key:"onSubmit",value:function(){var e=this.state,t=e.memberFilter,a=""!==e.searchTitle&&t.length>0,n=new Date,r=a&&new Date(I()(t[0].dateVenc,"DD-MM-YYYY")),o=a&&r.getTime()<n.getTime()?"Vencido":"Habilitado";this.setState({statusMember:o,submitted:!0})}},{key:"refreshList",value:function(){this.setState({currentMember:null,currentIndex:-1,memberFilter:[],statusMember:"",submitted:!1})}},{key:"render",value:function(){var e=this.state,t=e.members,n=e.searchTitle,o=e.memberFilter,i=e.submitted,c=e.statusMember,l=""!==n?o:t;return r.a.createElement(Q.a,{component:"main",maxWidth:"xs"},i?r.a.createElement("div",{className:"col-md-12"},r.a.createElement(Ie.a,{"aria-label":"breadcrumb"},r.a.createElement(ne.a,{color:"inherit",href:"#",onClick:this.refreshList},r.a.createElement(ja.a,{fontSize:"small"}),"Inicio")),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("ul",{className:"cards"},r.a.createElement("li",{className:0!==o.length?"card ".concat(c.toLowerCase()):"card"},0!==o.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"card__name"},l[0].nombre.toUpperCase()),r.a.createElement("p",{className:"card__dni"},"DNI: ",l[0].dni),r.a.createElement("p",{className:"status"},c),r.a.createElement("p",{className:"card__vigencia"},"Actividad: ",l[0].actividad||""),r.a.createElement("p",{className:"card__vigencia"},"Vencimiento: ",l[0].dateVenc)):r.a.createElement("p",{className:"empty-message"},"No se encontraron resultados"))))):r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{className:"img-logo",src:a(539)})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("form",{className:"form"},r.a.createElement(ee.a,{label:"Ingrese DNI",variant:"outlined",fullWidth:!0,id:"dni",onChange:this.searchTitle,type:"text"}),r.a.createElement(M.a,{type:"submit",color:"primary",fullWidth:!0,variant:"contained",className:"button__save",onClick:this.onSubmit},"Validar")))))}}]),n}(n.Component)),Ta=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={currentMember:{key:null,id:0,nombre:"",dni:"",actividad:"",contacto:"",telefono:"",date:I()((new Date).getTime()).format("DD-MM-YYYY"),dateVenc:I()((new Date).getTime()).add(1,"month").format("DD-MM-YYYY")},password:"",submitted:!1,allowUser:!1,error:!1},n.updateClient=n.updateClient.bind(Object(u.a)(n)),n.onChangeValues=n.onChangeValues.bind(Object(u.a)(n)),n.onDataChange=n.onDataChange.bind(Object(u.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(u.a)(n)),n.changePass=n.changePass.bind(Object(u.a)(n)),n.getUser=n.getUser.bind(Object(u.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=parseInt(this.props.match.params.id,10);ya.getAll().orderByChild("id").equalTo(e).once("value",this.onDataChange)}},{key:"onDataChange",value:function(e){var t=Object.keys(e.val()),a=e.val()[t];a.key=t[0],this.setState({currentMember:a})}},{key:"onChangeValues",value:function(e){var t=e.target.name,a=e.target.value;this.setState({currentMember:Object(b.a)(Object(b.a)({},this.state.currentMember),{},Object(G.a)({},t,a))})}},{key:"onChangeDate",value:function(e){var t=e.format("DD-MM-YYYY");this.setState({currentMember:Object(b.a)(Object(b.a)({},this.state.currentMember),{},{dateVenc:t})})}},{key:"changePass",value:function(e){this.setState({password:e.target.value})}},{key:"getUser",value:function(){"factorygym"===this.state.password?this.setState({allowUser:!0}):this.setState({error:!0})}},{key:"updateClient",value:function(){var e=this,t={id:this.state.currentMember.id,nombre:this.state.currentMember.nombre,telefono:this.state.currentMember.telefono,dni:this.state.currentMember.dni,date:this.state.currentMember.date,dateVenc:this.state.currentMember.dateVenc,contacto:this.state.currentMember.contacto,actividad:this.state.currentMember.actividad};ya.update(this.state.currentMember.key,t).then((function(){e.setState({submitted:!0})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.allowUser?r.a.createElement(Q.a,{component:"main",maxWidth:"xs"},this.state.submitted?r.a.createElement("div",null,r.a.createElement("h4",null,"Socio editado correctamente!"),r.a.createElement("a",{className:"btn btn-primary go-listado",href:"/members",role:"button"},"Inicio"),r.a.createElement("a",{className:"btn btn-primary go-listado",href:"/add-member",role:"button"},"Nuevo"),r.a.createElement("a",{className:"btn btn-primary go-listado",href:"/member-list",role:"button"},"Listado")):r.a.createElement("div",{className:"form-container"},r.a.createElement(Z.a,{component:"h1",variant:"h5"},"Editar Socio"),r.a.createElement("div",{className:"login-container"},r.a.createElement(X.a,{container:!0,spacing:2},r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,className:"default__textfield",id:"nombre",label:"Nombre y Apellido",value:this.state.currentMember.nombre,name:"nombre",onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{name:"dni",required:!0,className:"default__textfield",variant:"outlined",fullWidth:!0,id:"dni",value:this.state.currentMember.dni,label:"DNI",onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(he.a,null,"Fecha Vencimiento"),r.a.createElement(_.a,{className:"post-input  post-input__event",dateFormat:"DD-MM-YYYY",timeFormat:!1,name:"datevenc",utc:!0,closeOnSelect:!0,value:this.state.currentMember.dateVenc,onChange:this.onChangeDate})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",required:!0,fullWidth:!0,className:"default__textfield",id:"telefono",label:"Tel\xe9fono",name:"telefono",value:this.state.currentMember.telefono,onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",className:"default__textfield",fullWidth:!0,id:"actividad",label:"Actividad",value:this.state.currentMember.actividad,name:"actividad",onChange:this.onChangeValues})),r.a.createElement(X.a,{item:!0,xs:12},r.a.createElement(ee.a,{variant:"outlined",className:"default__textfield",fullWidth:!0,id:"contacto",label:"Contacto de emergencia",value:this.state.currentMember.contacto,name:"contacto",onChange:this.onChangeValues}))),r.a.createElement(M.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:"button__save",onClick:this.updateClient},"Aceptar")))):r.a.createElement(Q.a,{maxWidth:"xs"},this.state.error&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"La contrase\xf1a es incorrecta"),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Z.a,{component:"h1",variant:"h5"},"Ingrese contrase\xf1a para editar"),r.a.createElement("form",{className:"form"},r.a.createElement(ee.a,{label:"Contrase\xf1a",variant:"outlined",fullWidth:!0,onChange:this.changePass,type:"password"}),r.a.createElement(M.a,{type:"submit",color:"primary",variant:"contained",fullWidth:!0,className:"button__save",onClick:this.getUser},"Aceptar")))))}}]),a}(n.Component),Sa=(n.Component,function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={show:!1,toggle:!1},n.handleClick=n.handleClick.bind(Object(u.a)(n)),n.toggleButton=n.toggleButton.bind(Object(u.a)(n)),n}return Object(s.a)(a,[{key:"handleClick",value:function(e){this.setState({show:!this.state.show})}},{key:"toggleButton",value:function(){this.setState({toggle:!this.state.toggle})}},{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("currentUser"));window.matchMedia("(min-width: 768px)").matches;return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark",role:"navigation"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("a",{className:"navbar-brand",href:"/"},"TopTec"),e&&r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",onClick:this.toggleButton},r.a.createElement("span",{className:"navbar-toggler-icon"})),e&&r.a.createElement("div",{className:this.state.toggle?"collapse navbar-collapse show":"collapse navbar-collapse",id:"navbarSupportedContent"},("windy"===e.rol||"admin"===e.rol)&&r.a.createElement("div",{className:"dropdown-container"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/list-client",className:"nav-link"},"Clientes")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/list-products",className:"nav-link"},"Productos")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/list-pedidos",className:"nav-link"},"Pedidos")))),("forest"===e.rol||"admin"===e.rol)&&r.a.createElement("div",{className:"dropdown-container"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/forest/reservas",className:"nav-link"},"Listado de reservas")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/forest/reservation",className:"nav-link"},"Nueva reserva")))),("gym"===e.rol||"admin"===e.rol)&&r.a.createElement("div",{className:"dropdown-container"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/members",className:"nav-link"},"Inicio")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/add-member",className:"nav-link"},"Nuevo Socio")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/member-list",className:"nav-link"},"Listado de Socios")))),("forest"===e.rol||"admin"===e.rol)&&r.a.createElement("div",{className:"dropdown-container"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(c.b,{to:"/delete-reservas",className:"nav-link"},"Eliminar reservas")))),r.a.createElement("div",{className:"dropdown-container left"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/login"},"Salir"))))))),r.a.createElement("div",{className:"container mt-3"},r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:["/tutorials"],component:T}),r.a.createElement(h.b,{exact:!0,path:e?"/login":["/","/login"],component:se}),r.a.createElement(h.b,{exact:!0,path:"/register",component:ue}),r.a.createElement(h.b,{exact:!0,path:"/profile",component:me}),e?r.a.createElement(r.a.Fragment,null,("forest"===e.rol||"admin"===e.rol)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(h.b,{exact:!0,path:e&&"forest"===e.rol?["/","/forest/reservas"]:"/forest/reservas",component:_e}),r.a.createElement(h.b,{exact:!0,path:"/forest/reservation",component:Ye}),r.a.createElement(h.b,{exact:!0,path:"/forest/reserva/:id",component:Ae}),r.a.createElement(h.b,{exact:!0,path:"/forest/mesa/:id",component:qe}),r.a.createElement(h.b,{exact:!0,path:"/forest/mesas",component:Ue})),("windy"===e.rol||"admin"===e.rol)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(h.b,{exact:!0,path:e&&"windy"===e.rol?["/","/list-pedidos"]:"/list-pedidos",component:aa}),r.a.createElement(h.b,{exact:!0,path:"/pedido/:id",component:jt}),r.a.createElement(h.b,{exact:!0,path:"/edit-pedido/:id",component:ia}),r.a.createElement(h.b,{exact:!0,path:"/list-client",component:Xe}),r.a.createElement(h.b,{exact:!0,path:"/client",component:Je}),r.a.createElement(h.b,{exact:!0,path:"/client/:id",component:He}),r.a.createElement(h.b,{exact:!0,path:"/products",component:at}),r.a.createElement(h.b,{exact:!0,path:"/product/:id",component:ot}),r.a.createElement(h.b,{exact:!0,path:"/list-products",component:rt}),r.a.createElement(h.b,{exact:!0,path:"/change-price",component:ct}),r.a.createElement(h.b,{exact:!0,path:"/imprimir/:id",component:ca}),r.a.createElement(h.b,{exact:!0,path:"/new-visit",component:ua})),r.a.createElement(h.b,{exact:!0,path:e&&"prode"===e.rol?["/","/pronostico"]:"/pronostico",component:ga}),r.a.createElement(h.b,{exact:!0,path:"/positions",component:Ea}),r.a.createElement(h.b,{exact:!0,path:e&&"gym"===e.rol?["/","/members"]:"/members",component:xa}),r.a.createElement(h.b,{exact:!0,path:"/member-list",component:Oa}),e&&("admin"===e.rol||"lucasnovach"===e.userName)&&r.a.createElement(h.b,{exact:!0,path:"/members/:id",component:Ta}),r.a.createElement(h.b,{exact:!0,path:"/add-member",component:ka}),"admin"===e.rol&&r.a.createElement(r.a.Fragment,null,r.a.createElement(h.b,{exact:!0,path:e&&"admin"===e.rol?["/","/add"]:"add",component:j}),r.a.createElement(h.b,{exact:!0,path:"/delete-reservas",component:$}))):r.a.createElement(h.a,{to:"/login"}))))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(c.a,null,r.a.createElement(Sa,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[318,1,2]]]);
//# sourceMappingURL=main.c66c56a6.chunk.js.map